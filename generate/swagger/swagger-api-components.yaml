components:
  securitySchemes:
    SignedCookieKeyPairId:
      description: |
        認証/認可には、[sign-url](#operation/getSignedAccessV2) APIで取得した署名付きCookieを使います。
      type: "apiKey"
      in: "cookie"
      name: "CloudFront-Key-Pair-Id"
    SignedCookiePolicy:
      description: |
        認証/認可には、[sign-url](#operation/getSignedAccessV2) APIで取得した署名付きCookieを使います。
      type: "apiKey"
      in: "cookie"
      name: "CloudFront-Policy"
    SignedCookieSignature:
      description: |
        認証/認可には、[sign-url](#operation/getSignedAccessV2) APIで取得した署名付きCookieを使います。
      type: "apiKey"
      in: "cookie"
      name: "CloudFront-Signature"
    EveryoneRequestBody:
      description: |
        AnnoFabのユーザーなら誰でも利用できます。

        認証/認可には、リクエストボディに含まれるパスワード、トークン、または何らかの検証コードを用います。
        詳しくは個別のAPIの説明を確認してください。
      type: "http"
      scheme: "requestBody"
    EveryoneQueryParameter:
      description: |
        AnnoFabのユーザーなら誰でも利用できます。

        認証/認可には、クエリパラメータに含まれるトークンまたは何らかの検証コードを用います。
        詳しくは個別のAPIの説明を確認してください。
      type: "http"
      scheme: "requestBody"
    Everyone:
      description: |
        AnnoFabのユーザーなら誰でも利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    AnnoFabAdminOnly:
      description: |
        AnnoFabのシステム管理者のみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    AllProjectMember:
      description: |
        プロジェクトに所属するユーザーなら誰でも利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectAccepter:
      description: |
        プロジェクトのオーナーまたはプロジェクトのチェッカーのみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectDataUser:
      description: |
        プロジェクトのオーナーまたはプロジェクトのアノテーションユーザーのみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectAccepterOrDataUser:
      description: |
        プロジェクトのオーナー/チェッカー/アノテーションユーザーのいずれかのみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectOwner:
      description: |
        プロジェクトのオーナーのみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    AllOrganizationMember:
      description: |
        組織に所属するユーザーなら誰でも利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    OrganizationAdministrator:
      description: |
        組織のオーナーまたは組織の管理者のみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    OrganizationOwner:
      description: |
        組織のオーナーのみ利用できます。

        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
  responses:
    FileRedirectResponse:
      description: 正常
      headers:
        Location:
          schema:
            $ref: "#/components/schemas/TemporaryUrlString"
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/TemporaryUrl"
    SuccessMessage:
      description: 成功時のメッセージ
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Message"
    ErrorForbiddenResource:
      description: 権限エラー
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorForbiddenResource"
    ErrorMissingResource:
      description: 存在しないリソースを指定された
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorMissingResource"
    ErrorUnauthorizedApi:
      description: 認証エラー
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorUnauthorizedApi"
    ErrorInvalidRequest:
      description: リクエスト形式が正しくない。必要な属性が足りなかったり、属性が特定の値
      content:
        application/json:
          schema:
            # TODO このエラー定義には複数のschemaのエラーが該当しうる。それを記述する(KRSANNOFAC-1502)
            $ref: "#/components/schemas/Errors"
    ErrorUnderMaintenance:
      description: システムメンテナンス中
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorUnderMaintenance"
    ErrorRefreshTokenExpired:
      description: リフレッシュトークン有効期限切れのため、明示的にログインする必要があります
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorRefreshTokenExpired"
  schemas:
    ArrayOfProjectTaskStatisticsHistory:
      type: array
      items:
        $ref: "#/components/schemas/ProjectTaskStatisticsHistory"
    ArrayOfProjectAccountStatistics:
      type: array
      items:
        $ref: "#/components/schemas/ProjectAccountStatistics"
    ArrayOfInspectionStatistics:
      type: array
      items:
        $ref: "#/components/schemas/InspectionStatistics"
    ArrayOfTaskPhaseStatistics:
      type: array
      items:
        $ref: "#/components/schemas/TaskPhaseStatistics"
    ArrayOfLabelStatistics:
      type: array
      items:
        $ref: "#/components/schemas/LabelStatistics"
    ArrayOfWorktimeStatistics:
      type: array
      items:
        $ref: "#/components/schemas/WorktimeStatistics"
    ProjectCacheRecord:
      type: object
      properties:
        input:
          type: string
        members:
          type: string
        project:
          type: string
        instruction:
          type: string
        specs:
          type: string
        statistics:
          type: string
        organization:
          type: string
        supplementary:
          type: string
    Errors:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/ErrorItem"
        context:
          type: object
          description: 内部補足情報
    ErrorItem:
      type: object
      properties:
        error_code:
          type: string
        message:
          type: string
          description: エラーの概要
        ext:
          type: object
          description: 補足情報
    ErrorInvalidBody:
      $ref: '#/components/schemas/Errors'
    ErrorInvalidQueryParam:
      $ref: '#/components/schemas/Errors'
    ErrorMissingNecessaryQueryParam:
      $ref: '#/components/schemas/Errors'
    ErrorInvalidPath:
      $ref: '#/components/schemas/Errors'
    ErrorUnauthorizedApi:
      $ref: '#/components/schemas/Errors'
    ErrorLoginFailed:
      $ref: '#/components/schemas/Errors'
    ErrorPasswordResetRequired:
      $ref: '#/components/schemas/Errors'
    ErrorExpiredToken:
      $ref: '#/components/schemas/Errors'
    ErrorRefreshTokenExpired:
      $ref: '#/components/schemas/Errors'
    ErrorForbiddenResource:
      $ref: '#/components/schemas/Errors'
    ErrorMissingResource:
      $ref: '#/components/schemas/Errors'
    ErrorTimeout:
      $ref: '#/components/schemas/Errors'
    ErrorAlreadyUpdated:
      $ref: '#/components/schemas/Errors'
    ErrorStateMismatch:
      $ref: '#/components/schemas/Errors'
    ErrorInternalServerError:
      $ref: '#/components/schemas/Errors'
    ErrorUnderMaintenance:
      $ref: '#/components/schemas/Errors'
    Message:
      type: object
      properties:
        message:
          type: string
          description: 多言語対応
    InternationalizationMessage:
      type: object
      required:
        - messages
        - default_lang
      properties:
        messages:
          type: array
          items:
            type: object
            required:
              - lang
              - message
            properties:
              lang:
                type: string
              message:
                type: string
        default_lang:
          type: string
    SignUpRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ConfirmSignUpRequest:
      type: object
      required:
        - account_id
        - user_id
        - password
        - username
        - lang
        - keylayout
        - confirmation_code
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        password:
          type: string
        username:
          type: string
        lang:
          type: string
        keylayout:
          type: string
        confirmation_code:
          type: string
    LoginRequest:
      type: object
      required:
        - user_id
        - password
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        password:
          type: string
    LoginResponse:
      type: object
      properties:
        token:
          $ref: "#/components/schemas/Token"
    Token:
      type: object
      properties:
        id_token:
          type: string
          description: 形式は[JWT](https://jwt.io/)。
        access_token:
          type: string
          description: 形式は[JWT](https://jwt.io/)。
        refresh_token:
          type: string
          description: 形式は[JWT](https://jwt.io/)。
    RefreshTokenRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string
    ChangePasswordRequest:
      type: object
      required:
        - user_id
        - old_password
        - new_password
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        old_password:
          type: string
        new_password:
          type: string
    PasswordResetRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ConfirmResetPasswordRequest:
      type: object
      required:
        - user_id
        - confirmation_code
        - new_password
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        confirmation_code:
          type: string
        new_password:
          type: string
    ResetEmailRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ConfirmResetEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    VerifyEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          $ref: "#/components/schemas/Token"
    ConfirmVerifyEmailRequest:
      type: object
      required:
        - token
        - confirmation_code
      properties:
        token:
          $ref: "#/components/schemas/Token"
        confirmation_code:
          type: string
    ConfirmAccountDeleteRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    Account:
      type: object
      required:
        - account_id
        - user_id
        - username
        - email
        - lang
        - keylayout
        - authority
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        email:
          type: string
          format: email
        lang:
          type: string
        biography:
          $ref: "#/components/schemas/UserBiography"
        keylayout:
          type: string
        authority:
          $ref: "#/components/schemas/AccountAuthority"
        updated_datetime:
          type: string
          format: date-time
    AccountAuthority:
      type: string
      enum:
        - user
        - admin
    MyAccount:
      allOf:
        - $ref: "#/components/schemas/Account"
        - type: object
          required:
            - errors
          properties:
            reset_requested_email:
              type: string
              format: email
            errors:
              type: array
              items:
                type: string
    PutMyAccountRequest:
      type: object
      required:
        - user_id
        - username
        - lang
        - keylayout
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        lang:
          type: string
        keylayout:
          type: string
        biography:
          $ref: "#/components/schemas/UserBiography"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    LastUpdatedDatetime:
      type: string
      format: date-time
      description: |
        新規作成時は未指定、更新時は必須（更新前の日時）
    AcceptOrganizationInvitationRequest:
      type: object
      properties:
        token:
          type: string
    OrganizationActivity:
      type: object
      required:
        - organization_id
        - created_datetime
        - storage_usage_bytes
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        created_datetime:
          type: string
          format: date-time
        storage_usage_bytes:
          type: number
    Organization:
      type: object
      required:
        - organization_id
        - organization_name
        - email
        - price_plan
        - summary
        - created_datetime
        - updated_datetime
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        organization_name:
          type: string
        email:
          type: string
          format: email
        price_plan:
          $ref: "#/components/schemas/PricePlan"
        summary:
          $ref: "#/components/schemas/OrganizationSummary"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    OrganizationCacheRecord:
      type: object
      properties:
        input:
          type: string
        members:
          type: string
        statistics:
          type: string
        organization:
          type: string
    OrganizationSummary:
      type: object
      properties: {}
    PricePlan:
      type: string
      enum:
        - free
        - business
    OrganizationMember:
      type: object
      required:
        - organization_id
        - account_id
        - user_id
        - username
        - role
        - status
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        role:
          $ref: "#/components/schemas/OrganizationMemberRole"
        status:
          $ref: "#/components/schemas/OrganizationMemberStatus"
        biography:
          $ref: "#/components/schemas/UserBiography"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    OrganizationMemberRole:
      type: string
      enum:
        - owner
        - administrator
        - contributor
    OrganizationMemberStatus:
      type: string
      enum:
        - active
        - waiting_response
        - inactive
      description: |
        * `active` - 組織メンバーとして有効で、組織を閲覧したり、権限があれば編集できます。
        * `waiting_response` - 組織に招待され、まだ加入/脱退を返答していません。組織の一部を閲覧のみできます。
        * `inactive` - 脱退したメンバーを表します。組織を閲覧できません。
    OrganizationPlugin:
      type: object
      required:
        - organization_id
        - plugin_id
        - detail
        - created_datetime
        - updated_datetime
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        plugin_id:
          $ref: "#/components/schemas/PluginId"
        plugin_name:
          $ref: "#/components/schemas/PluginName"
        description:
          $ref: "#/components/schemas/PluginDescription"
        detail:
          $ref: "#/components/schemas/PluginDetail"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    PutOrganizationPluginRequest:
      type: object
      required:
        - plugin_type
        - compatible_input_data_types
      properties:
        plugin_name:
          $ref: "#/components/schemas/PluginName"
        description:
          $ref: "#/components/schemas/PluginDescription"
        detail:
          $ref: "#/components/schemas/PluginDetail"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    PluginId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        プラグインID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    PluginName:
      type: string
      example: "foo-bar"
      description: |
        プラグインの名前です。
        プラグイン一覧や、プロジェクトで使うプラグインを選ぶときなどに表示されます。
    PluginDescription:
      type: string
      example: "desc"
      description: |
        プラグインの説明です。
        プラグイン一覧や、プロジェクトで使うプラグインを選ぶときなどに表示されます。
    PluginDetail:
      description: |
        * `PluginDetailAnnotationEditor` - カスタムアノテーションエディタ用のプラグインを表します。
        * `PluginDetailTaskAssignment` - カスタムタスク割当用のプラグインを表します。
        * `PluginDetailAnnotationSpecs` - カスタムアノテーション仕様用のプラグインを表します。
      oneOf:
        - $ref: "#/components/schemas/PluginDetailAnnotationEditor"
        - $ref: "#/components/schemas/PluginDetailTaskAssignment"
        - $ref: "#/components/schemas/PluginDetailAnnotationSpecs"
      discriminator:
        propertyName: "_type"
        mapping:
          AnnotationEditor: "#/components/schemas/PluginDetailAnnotationEditor"
          TaskAssignment: "#/components/schemas/PluginDetailTaskAssignment"
          AnnotationSpecs: "#/components/schemas/PluginDetailAnnotationSpecs"
    PluginDetailAnnotationEditor:
      type: object
      description: |
        カスタムアノテーションエディタ用のプラグインを表します。
      required:
        - compatible_input_data_types
      properties:
        url:
          $ref: "#/components/schemas/AnnotationEditorUrl"
        compatible_input_data_types:
          $ref: "#/components/schemas/PluginCompatibleInputDataTypes"
        _type:
          type: string
          description: |
            `AnnotationEditor`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "AnnotationEditor"
    PluginDetailTaskAssignment:
      type: object
      description: |
        カスタムタスク割当用のプラグインを表します。
      properties:
        url:
          $ref: "#/components/schemas/TaskAssignmentUrl"
        _type:
          type: string
          description: |
            `TaskAssignment`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "TaskAssignment"
    PluginDetailAnnotationSpecs:
      type: object
      description: |
        カスタムアノテーション仕様用のプラグインを表します。
      required:
        - compatible_input_data_types
      properties:
        url:
          $ref: "#/components/schemas/AnnotationSpecsUrl"
        compatible_input_data_types:
          $ref: "#/components/schemas/PluginCompatibleInputDataTypes"
        _type:
          type: string
          description: |
            `AnnotationSpecs`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "AnnotationSpecs"
    PluginCompatibleInputDataTypes:
      type: array
      items:
        $ref: "#/components/schemas/InputDataType"
      example: ["custom"]
      description: |
        プラグインが対応している入力データです。
        プラグイン種別がカスタムアノテーションエディタ、またはカスタムアノテーション仕様の場合のみ有効です。
    AnnotationEditorUrl:
      type: string
      example: "https://example.com/my/editors?p={projectId}&t={taskId}"
      description: |
        カスタムアノテーションエディタでタスクを開くための URL です。
        プラグインを使用するプロジェクトのタスク一覧などで使用されます。
        プラグイン種別がカスタムアノテーションエディタの場合のみ有効です。

        この URL には、タスクを特定するための以下のパラメータを必ず埋め込んでください。

        * `{projectId}`
        * `{taskId}`

        以下のパラメーターは任意で指定します。

        * `{inputDataId}`: アノテーション一覧などから、特定の入力データにフォーカスした状態でタスクを開くときなどに指定します。
        * `{annotationId}`: アノテーション一覧などから、特定のアノテーションにフォーカスした状態でタスクを開くときなどに指定します。
    TaskAssignmentUrl:
      type: string
      example: "https://example.com/my/editors?p={projectId}&t={taskId}"
      description: |
        「カスタムタスク割当API」のURLです。
        プラグイン種別がカスタムタスク割当の場合のみ有効です。

        #### カスタムタスク割当APIについて。

        * 独自のアルゴリズムで作業者にタスクを割当するAPIです。
        * AnnoFabから提供されるものではなく、第三者 (ユーザー様) が用意します。
        * 作業者がタスク一覧やアノテーションエディタのタスク取得ボタンを押すと、指定したURLに複数の情報 (※1) と共にHTTPリクエスト (POST) が送られます。
        * カスタムタスク割当APIでは、AnnoFabで提供しているAPI (※2) を使用して作業者にタスクを割当してください。
        * タスクの割当に成功した場合は以下のHTTPレスポンスを返却してください。
          * レスポンスヘッダ: `Access-Control-Allow-Origin: https://annofab.com`
          * レスポンスボディ: 割当した単一のタスク
          * ステータスコード: 200
        * 作業者に割当できるタスクがない場合は以下のHTTPレスポンスを返却してください。
          * レスポンスヘッダ: `Access-Control-Allow-Origin: https://annofab.com`
          * レスポンスボディ: `{"errors": [{"error_code": "MISSING_RESOURCE"}]}`
          * ステータスコード: 404
        * 作業者の認証トークンの期限が切れている場合があります。その場合は以下のHTTPレスポンスを返却してください。
          * レスポンスヘッダ: `Access-Control-Allow-Origin: https://annofab.com`
          * レスポンスボディ: `{"errors": [{"error_code": "EXPIRED_TOKEN"}]}`
          * ステータスコード: 401

        #### Preflightリクエストについて。

        * AnnoFabからカスタムタスク割当APIへCross-OriginなHTTPリクエストを送信するより前に、ブラウザの仕様により「Preflightリクエスト」と呼ばれるHTTPリクエストが送られます。
        * カスタムタスク割当を利用するためには、カスタムタスク割当APIとは別に「Preflightリクエスト対応API」を用意する必要があります。
        * 以下の要件を満たす「Preflightリクエスト対応API」を用意してください。
          * URL: カスタムタスク割当APIと同じURL
          * HTTPメソッド: OPTIONS
          * レスポンスヘッダ:
            * `Access-Control-Allow-Origin: https://annofab.com`
            * `Access-Control-Allow-Headers: Content-Type`
          * レスポンスボディ: 空(から)
          * ステータスコード: 200

        ※1 以下の情報が送られます。

        * HTTPボディ (JSON形式)
          * `authorization_token` : 作業者の認証トークン。AnnoFabのAPIを利用する際に使用します。
          * `project_id` : タスクの割当リクエストが行われたプロジェクトのID。
          * `phase` : 作業者が割当を要求したタスクフェーズ。このフェーズのタスクを割当してください。

        ※2 例えば以下のAPIがあります。(詳しい情報はAPIドキュメントを参照してください)

        * `getMyAccount` : 作業者のアカウント情報を取得できます。
        * `getTasks` : プロジェクトのタスクを取得できます。
        * `assignTasks` : 作業者にタスクを割当することができます。
    AnnotationSpecsUrl:
      type: string
      example: "https://example.com/my/specs?p={projectId}"
      description: |
        カスタムアノテーション仕様画面の URL です。
        プラグイン種別がカスタムアノテーション仕様の場合のみ有効です。

        この URL には、プロジェクトを特定するための以下のパラメータを必ず埋め込んでください。

        * `{projectId}`
    MyOrganization:
      type: object
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        name:
          type: string
        email:
          type: string
          format: email
        price_plan:
          $ref: "#/components/schemas/PricePlan"
        summary:
          $ref: "#/components/schemas/OrganizationSummary"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
        my_role:
          $ref: "#/components/schemas/OrganizationMemberRole"
        my_status:
          $ref: "#/components/schemas/OrganizationMemberStatus"
    OrganizationRegistrationRequest:
      type: object
      required:
        - organization_name
        - organization_email
        - price_plan
      properties:
        organization_name:
          $ref: "#/components/schemas/OrganizationName"
        organization_email:
          type: string
          format: email
        price_plan:
          $ref: "#/components/schemas/PricePlan"
    PutOrganizationNameRequest:
      type: object
      required:
        - organization_id
        - organization_name
        - last_updated_datetime
      properties:
        organization_id:
          type: string
        organization_name:
          $ref: "#/components/schemas/OrganizationName"
        last_updated_datetime:
          type: string
          format: date-time
    PutOrganizationMemberRoleRequest:
      type: object
      required:
        - role
      properties:
        role:
          $ref: "#/components/schemas/OrganizationMemberRole"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    InviteOrganizationMemberRequest:
      type: object
      properties:
        role:
          $ref: "#/components/schemas/OrganizationMemberRole"
    AccountId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    UserId:
      type: string
      example: "john_doe"
    UserCacheRecord:
      type: object
      properties:
        account:
          type: string
        members:
          type: string
        projects:
          type: string
        organizations:
          type: string
    OrganizationId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        組織ID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    OrganizationName:
      type: string
      example: "sample-organization"
      description: |
        組織名。[値の制約についてはこちら。](#section/API-Convention/APIID)
    ProjectId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        プロジェクトID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    LabelId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    AdditionalDataDefinitionId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    ChoiceId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    PhraseId:
      type: string
      example: "my_phrase_id"
    TaskId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        タスクID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    InputDataId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        入力データID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    InputDataSetId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        入力データセットID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    SupplementaryDataId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    TaskHistoryId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    AnnotationId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        アノテーションID。[値の制約についてはこちら。](#section/API-Convention/APIID)<br>
        annotation_type が classification の場合は label_id と同じ値が格納されます。
    InspectionId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        検査ID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    MarkerId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        マーカーID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    JobId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    WebhookId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        WebhookID。[値の制約についてはこちら。](#section/API-Convention/APIID)
    Duration:
      type: string
      example: "PT34H17M36.789S"
    UserBiography:
      type: string
      description: |
        人物紹介、略歴。

        この属性は、AnnoFab外の所属先や肩書などを表すために用います。
        AnnoFab上の「複数の組織」で活動する場合、本籍を示すのに便利です。
      minLength: 0
      maxLength: 100
      example: "Annotation Manager, ABC Company"
    AnnotationFormatVersion:
      type: string
      example: "1.0.0"
      description: |
        アノテーションフォーマットのバージョンです。
        アノテーションフォーマットとは、プロジェクト個別のアノテーション仕様ではなく、AnnoFabのアノテーション構造のことです。
        したがって、アノテーション仕様を更新しても、このバージョンは変化しません。

        バージョンの読み方と更新ルールは、業界慣習の[Semantic Versioning](https://semver.org/)にもとづきます。

        JSONに出力されるアノテーションフォーマットのバージョンは、アノテーションZIPが作成される時点のものが使われます。
        すなわち、`1.0.0`の時点のタスクで作成したアノテーションであっても、フォーマットが `1.0.1` に上がった次のZIP作成時では `1.0.1` となります。
        バージョンを固定してZIPを残しておきたい場合は、プロジェクトが完了した時点でZIPをダウンロードして保管しておくか、またはプロジェクトを「停止中」にします。
    Project:
      type: object
      required:
        - project_id
        - organization_id
        - title
        - project_status
        - input_data_type
        - created_datetime
        - updated_datetime
        - configuration
        - summary
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        title:
          type: string
          description: プロジェクトのタイトル
        overview:
          type: string
          description: プロジェクトの概要
        project_status:
          $ref: "#/components/schemas/ProjectStatus"
        input_data_type:
          $ref: "#/components/schemas/InputDataType"
        configuration:
          $ref: "#/components/schemas/ProjectConfiguration"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
        summary:
          $ref: "#/components/schemas/ProjectSummary"
    ProjectStatus:
      type: string
      enum:
        - active
        - suspended
      description: |
        プロジェクトの状態
        * `active` - プロジェクトが進行中
        * `suspended` - プロジェクトが停止中
    AssigneeRuleOfResubmittedTask:
      type: string
      enum:
        - no_assignee
        - fixed
      description: |
        再提出されたタスクの検査/受入担当者の割当方法
        * `no_assignee` - 以前の担当者で固定せず、未割当てにします。
        * `fixed` - 以前の担当者が再度担当します。以前の担当者がいない(1回目の検査/受入)場合は未割当てになります。
    InputDataType:
      type: string
      description: |
        アノテーションする入力データの種類。プロジェクトの作成時のみ指定可能（未指定の場合は `image`）です。更新時は無視されます。
        * `image` - 画像
        * `movie` - 動画
        * `custom` - カスタム
      enum:
        - image
        - movie
        - custom
    ProjectConfiguration:
      type: object
      properties:
        number_of_inspections:
          description: |
            検査回数。
            * 0回：教師付け -> 受入
            * 1回：教師付け -> 検査 -> 受入
            * n回(n >= 2)：教師付け -> 検査1 -> ... -> 検査n -> 受入
          type: integer
          default: 0
          minimum: 0
        assignee_rule_of_resubmitted_task:
          description: 再提出されたタスクの検査/受入担当者ルール。
          $ref: "#/components/schemas/AssigneeRuleOfResubmittedTask"
          default: no_assignee
        task_assignment_type:
          $ref: "#/components/schemas/TaskAssignmentType"
        max_tasks_per_member:
          description: 保留中のタスクを除き、1人（オーナー以外）に割り当てられるタスク数上限。未指定の場合は10件として扱う。
          type: integer
          default: 10
          minimum: 1
          maximum: 100
        max_tasks_per_member_including_hold:
          description: 保留中のタスクを含めて、1人（オーナー以外）に割り当てられるタスク数上限。未指定の場合は20件として扱う。
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        input_data_set_id_list:
          description: このフィールドは内部用でまだ何も意味を成しません。今は空配列を指定してください。
          type: array
          items:
            $ref: "#/components/schemas/InputDataSetId"
          example: []
        input_data_max_long_side_length:
          description: |
            入力データ画像の長辺の最大値（未指定時は4096px）。

            画像をアップロードすると、長辺がこの値になるように画像が自動で圧縮されます。
            アノテーションの座標は、もとの解像度の画像でつけたものに復元されます。

            大きな数値を設定すると入力データ画像のサイズが大きくなり、生産性低下やブラウザで画像を表示できない懸念があります。注意して設定してください。
          type: integer
          default: 4096
          minimum: 0
        sampling_inspection_rate:
          description: 抜取検査率。0-100のパーセント値で指定し、未指定の場合は100%として扱う。
          type: integer
        sampling_acceptance_rate:
          description: 抜取受入率。0-100のパーセント値で指定し、未指定の場合は100%として扱う。
          type: integer
        private_storage_aws_iam_role_arn:
          type: string
          description: |
            AWS IAMロール。ビジネスプランでのS3プライベートストレージの認可で使います。
            [S3プライベートストレージの認可の設定についてはこちら](/docs/faq/#m0b240)をご覧ください。
          example: "arn:aws:iam::123456789012:role/AnnoFabPrivateStorageAccessor"
        plugin_id:
          $ref: "#/components/schemas/PluginId"
          description: |
            カスタムアノテーションエディタのプラグインID。カスタムプロジェクトの場合は必須です。
        custom_task_assignment_plugin_id:
          $ref: "#/components/schemas/PluginId"
          description: |
            `task_assignment_type`に`custom`を設定している場合のみ、カスタムタスク割当のプラグインIDを設定してください。
        custom_specs_plugin_id:
          $ref: "#/components/schemas/PluginId"
          description: |
            カスタムアノテーション仕様のプラグインID。
    ProjectSummary:
      type: object
      properties:
        last_tasks_updated_datetime:
          type: string
          format: date-time
          description: タスクの最終更新日時
    TaskAssignmentType:
      type: string
      default: random
      enum:
        - random
        - selection
        - random_and_selection
        - custom
      description: |
        プロジェクトで使用するタスクの割当方式。

        * `random` -  タスクフェーズのみを指定してランダムにタスクを自身に割当する方式です。
        * `selection` - 担当者とタスクを明示的に指定してタスクを割当する方式です。プロジェクトオーナーもしくはチェッカーのみ、自身以外のプロジェクトメンバーを担当者に指定できます。
        * `random_and_selection` - ランダム割当と選択割当の両機能を使用する方式です。
        * `custom` - タスク割当アルゴリズム (API) を独自に定義してタスクを割当する方式です。
    JobInfo:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        job_type:
          $ref: "#/components/schemas/JobType"
        job_id:
          $ref: "#/components/schemas/JobId"
        job_status:
          $ref: "#/components/schemas/JobStatus"
        job_execution:
          type: object
          description: ジョブの内部情報
        job_detail:
          type: object
          description: ジョブ結果の内部情報
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    JobType:
      type: string
      enum:
        - copy-project
        - gen-inputs
        - gen-tasks
        - gen-annotation
        - gen-tasks-list
        - gen-inputs-list
        - delete-project
        - invoke-hook
        - move-project
      description: |
        * `copy-project` - プロジェクトのコピー。[initiateProjectCopy](#operation/initiateProjectCopy) APIを実行したときに登録されるジョブ。
        * `gen-inputs` - zipファイルから入力データの作成。[putInputData](#operation/putInputData) APIを実行して、zipファイルから入力データを作成したときに登録されるジョブ。
        * `gen-tasks` - タスクの一括作成。[initiateTasksGeneration](#operation/initiateTasksGeneration) APIを実行したときに登録されるジョブ。
        * `gen-annotation` - アノテーションZIPの更新。[postAnnotationArchiveUpdate](#operation/postAnnotationArchiveUpdate) APIを実行したときに登録されるジョブ。
        * `gen-tasks-list` - タスク全件ファイルの更新。[postProjectTasksUpdate](#operation/postProjectTasksUpdate) APIを実行したときに登録されるジョブ。
        * `gen-inputs-list` - 入力データ情報全件ファイルの更新。[postProjectInputsUpdate](#operation/postProjectInputsUpdate) APIを実行したときに登録されるジョブ。
        * `delete-project` - プロジェクトの削除。[deleteProject](#operation/deleteProject) APIを実行したときに登録されるジョブ。
        * `invoke-hook` - Webhookの起動。
        * `move-project` - プロジェクトの組織移動。[putProject](#operation/putProject) API で組織を変更したときに登録されるジョブ。

        ## ジョブの同時実行制限

        AnnoFab上に登録されているデータの整合性を保つため、プロジェクト内で特定のジョブが実行中の間は他のジョブが実行できないよう制限をかけています。

        ジョブの同時実行可否はジョブの種別によって異なります。

        ### copy-project
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `gen-inputs`
        * `gen-tasks`
        * `delete-project`
        * `move-project`

        ### gen-inputs
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `copy-project`
        * `gen-inputs`
        * `gen-tasks`
        * `gen-inputs-list`
        * `delete-project`
        * `move-project`

        ### gen-tasks
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `copy-project`
        * `gen-inputs`
        * `gen-tasks`
        * `gen-annotation`
        * `gen-tasks-list`
        * `delete-project`
        * `move-project`

        ### gen-annotation
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `gen-tasks`
        * `gen-annotation`
        * `delete-project`
        * `move-project`

        ### gen-tasks-list
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `gen-tasks`
        * `gen-tasks-list`
        * `delete-project`
        * `move-project`

        ### gen-inputs-list
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `gen-inputs`
        * `gen-inputs-list`
        * `delete-project`
        * `move-project`

        ### delete-project
        他のジョブが実行されていない場合**のみ**実行できます。

        ### invoke-hook
        次のジョブが実行されている場合、このジョブを実行することはできません。

        * `delete-project`
        * `move-project`

        ### move-project
        他のジョブが実行されていない場合**のみ**実行できます。

    JobStatus:
        type: string
        enum:
          - progress
          - succeeded
          - failed
    PostAnnotationArchiveUpdateResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
    PostProjectTasksUpdateResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
    ProjectCopyResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
        dest_project:
          $ref: "#/components/schemas/Project"
    DeleteProjectResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
        project:
          $ref: "#/components/schemas/Project"
    PutProjectResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
        project:
          $ref: "#/components/schemas/Project"
    TaskGenerateResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
        project:
          $ref: "#/components/schemas/Project"
    ProjectInputsUpdateResponse:
      type: object
      properties:
        job:
          $ref: "#/components/schemas/JobInfo"
    Webhook:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        event_type:
          $ref: "#/components/schemas/WebhookEventType"
        webhook_id:
          $ref: "#/components/schemas/WebhookId"
        webhook_status:
          $ref: "#/components/schemas/WebhookStatus"
        method:
          $ref: "#/components/schemas/WebhookHttpMethod"
        headers:
          type: array
          items:
            $ref: "#/components/schemas/WebhookHeader"
        body:
          type: string
          example: '{\"message\": \"{{PROJECT_ID}} is updated at {{COMPLETE_DATETIME}}\"}'
        url:
          type: string
          format: uri
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    WebhookHeader:
      type: object
      properties:
        name:
          type: string
        value:
          type: string
    WebhookStatus:
      type: string
      enum:
        - active
        - inactive
    WebhookHttpMethod:
      type: string
      enum:
        - POST
        - PUT
        - DELETE
        - PATCH
        - GET
        - HEAD
    WebhookEventType:
      type: string
      enum:
        - task-completed
        - annotation-archive-updated
        - input-data-zip-registered
        - project-copy-completed
      description: |
        * `task-completed` - タスク受入完了
        * `annotation-archive-updated` - アノテーションZIP作成完了
        * `input-data-zip-registered` - 入力データZIP登録完了
        * `project-copy-completed` - プロジェクトコピー完了
    PutProjectRequest:
      type: object
      required:
        - title
        - status
        - organization_name
        - configuration
      properties:
        title:
          type: string
          description: プロジェクトのタイトル
        overview:
          type: string
          description: プロジェクトの概要
        status:
          $ref: "#/components/schemas/ProjectStatus"
        input_data_type:
          $ref: "#/components/schemas/InputDataType"
        organization_name:
          type: string
          description: |
            プロジェクトの所属組織を変更する場合は、ここに変更先の組織名を指定します。

            * 所属組織を変更する前にプロジェクトを停止する必要があります。
            * APIを呼び出すアカウントは、変更先組織の管理者またはオーナーである必要があります。
            * 変更後の組織に所属していないプロジェクトメンバーも残りますが、作業はできません。あらためて組織に招待してください。
        configuration:
          $ref: "#/components/schemas/ProjectConfiguration"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
        force_suspend:
          type: boolean
          description: 作業中タスクがあるプロジェクトを停止する時trueにして下さい
          default: false
    ProjectCopyRequest:
      type: object
      required:
        - dest_project_id
        - dest_title
      properties:
        dest_project_id:
          $ref: "#/components/schemas/ProjectId"
        dest_title:
          type: string
          description: コピー先プロジェクトのタイトル
        dest_overview:
          type: string
          description: コピー先プロジェクトの概要
        copy_inputs:
          type: boolean
          description: |
            「入力データ」をコピーするかどうかを指定します。
          default: false
        copy_tasks:
          type: boolean
          description: |
            「タスク」をコピーするかどうかを指定します。

            この属性の値を true とする場合、他の属性の値を必ず次のように指定してください。

            * copy_inputs の値を true とする
          default: false
        copy_annotations:
          type: boolean
          description: |
            「アノテーション」をコピーするかどうかを指定します。

            この属性の値を true とする場合、他の属性の値を必ず次のように指定してください。

            * copy_inputs の値を true とする
            * copy_tasks の値を true とする
          default: false
        copy_webhooks:
          type: boolean
          description: |
            「Webhook」をコピーするかどうかを指定します。
          default: false
        copy_supplementaly_data:
          type: boolean
          description: |
            「補助情報」をコピーするかどうかを指定します。

            この属性の値を true とする場合、他の属性の値を必ず次のように指定してください。

            * copy_inputs の値を true とする
          default: false
        copy_instructions:
          type: boolean
          description: |
            「作業ガイド」をコピーするかどうかを指定します。
          default: false
    ProjectMember:
      type: object
      required:
        - project_id
        - account_id
        - user_id
        - username
        - member_status
        - member_role
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        member_status:
          $ref: "#/components/schemas/ProjectMemberStatus"
        member_role:
          $ref: "#/components/schemas/ProjectMemberRole"
        biography:
          $ref: "#/components/schemas/UserBiography"
        updated_datetime:
          type: string
          format: date-time
        created_datetime:
          type: string
          format: date-time
        sampling_inspection_rate:
          description: メンバー固有の抜取検査率（0-100のパーセント値）。
          type: integer
        sampling_acceptance_rate:
          description: メンバー固有の抜取受入率（0-100のパーセント値）。
          type: integer
    ProjectMemberStatus:
      type: string
      enum:
        - active
        - inactive
      description: |
        * `active` - プロジェクトメンバーとして有効で、プロジェクトを閲覧したり、権限があれば編集できます。
        * `inactive` - 脱退したプロジェクトメンバーを表します。プロジェクトを閲覧できません。
    ProjectMemberRole:
      type: string
      enum:
        - owner
        - worker
        - accepter
        - training_data_user
    ProjectMemberRequest:
      type: object
      properties:
        member_status:
          $ref: "#/components/schemas/ProjectMemberStatus"
        member_role:
          $ref: "#/components/schemas/ProjectMemberRole"
        sampling_inspection_rate:
          description: メンバー固有の抜取検査率。0-100のパーセント値で指定する。値が指定された場合、プロジェクトの抜取検査率を指定の値で上書きする。
          type: integer
        sampling_acceptance_rate:
          description: メンバー固有の抜取受入率。0-100のパーセント値で指定する。値が指定された場合、プロジェクトの抜取受入率を指定の値で上書きする。
          type: integer
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    ProjectTaskStatisticsHistory:
      type: object
      properties:
        date:
          type: string
          format: date
        tasks:
          type: array
          items:
            $ref: "#/components/schemas/ProjectTaskStatistics"
    ProjectTaskStatistics:
      type: object
      required:
        - phase
        - status
        - count
        - work_timespan
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        status:
          $ref: "#/components/schemas/TaskStatus"
        count:
          type: integer
          minimum: 0
          description: タスク数
        work_timespan:
          type: integer
          description: 累計実作業時間(ミリ秒)
    ProjectAccountStatistics:
      type: object
      required:
        - account_id
        - histories
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        histories:
          type: array
          items:
            $ref: "#/components/schemas/ProjectAccountStatisticsHistory"
    ProjectAccountStatisticsHistory:
      type: object
      required:
        - date
        - tasks_completed
        - tasks_rejected
        - worktime
      properties:
        date:
          type: string
          format: date
        tasks_completed:
          type: integer
          description: |
            教師付フェーズのタスクを提出した回数、または検査/受入フェーズのタスクを合格/差戻にした回数。

            たとえば、あるタスクのタスク履歴が下表の状態だった場合、2020-04-01の`tasks_completed`は以下の通りになります。

            * Alice: 1
            * Bob: 1
            * Chris: 2


            <table>
              <tr>
                <th>担当者</th>
                <th>フェーズ</th>
                <th>作業内容</th>
                <th>完了日時</th>
              </tr>
              <tr>
                <td>Alice</td>
                <td>教師付</td>
                <td>提出する</td>
                <td>2020-04-01 09:00</td>
              </tr>
              <tr>
                <td>Chris</td>
                <td>受入</td>
                <td>差し戻す</td>
                <td>2020-04-01 10:00</td>
              </tr>
              <tr>
                <td>Bob</td>
                <td>教師付</td>
                <td>提出する</td>
                <td>2020-04-01 11:00</td>
              </tr>
              <tr>
                <td>Chris</td>
                <td>受入</td>
                <td>合格にする</td>
                <td>2020-04-01 12:00</td>
              </tr>
            </table>
        tasks_rejected:
          type: integer
          description: |
            教師付フェーズを担当したタスクが差し戻された回数、または受入フェーズを担当したタスクが受入完了を取り消された回数。

            たとえば、あるタスクのタスク履歴が下表の状態だった場合、2020-04-01の`tasks_rejected`は以下の通りになります。

            * Alice: 1
            * Bob: 1
            * Chris: 1


            <table>
              <tr>
                <th>担当者</th>
                <th>フェーズ</th>
                <th>作業内容</th>
                <th>完了日時</th>
              </tr>
              <tr>
                <td>Alice</td>
                <td>教師付</td>
                <td>提出する</td>
                <td>2020-04-01 09:00</td>
              </tr>
              <tr>
                <td>Chris</td>
                <td>受入</td>
                <td>差し戻す</td>
                <td>2020-04-01 10:00</td>
              </tr>
              <tr>
                <td>Bob</td>
                <td>教師付</td>
                <td>提出する</td>
                <td>2020-04-01 11:00</td>
              </tr>
              <tr>
                <td>Chris</td>
                <td>受入</td>
                <td>差し戻す</td>
                <td>2020-04-01 12:00</td>
              </tr>
              <tr>
                <td>Bob</td>
                <td>教師付</td>
                <td>提出する</td>
                <td>2020-04-01 13:00</td>
              </tr>
              <tr>
                <td>Chris</td>
                <td>受入</td>
                <td>合格にする</td>
                <td>2020-04-01 14:00</td>
              </tr>
              <tr>
                <td>Dave</td>
                <td>受入</td>
                <td>受入完了状態を取り消して、再度合格にする</td>
                <td>2020-04-01 15:00</td>
              </tr>
            </table>
        worktime:
          type: string
          example: "PT34H17M36.789S"
          description: 作業時間（ISO 8601 duration）
    InspectionStatistics:
      type: object
      required:
        - project_id
        - date
        - breakdown
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        date:
          description: 集計日
          type: string
          format: date
        breakdown:
          $ref: "#/components/schemas/InspectionStatisticsBreakdown"
    InspectionStatisticsBreakdown:
      type: object
      description: 検査コメント数の集計結果
      required:
        - labels
        - no_label
      properties:
        labels:
          description: ラベルごとの指摘集計結果。キーは`label_id`
          type: object
          additionalProperties: {
            $ref: "#/components/schemas/InspectionStatisticsPhrases"
          }
        no_label:
          $ref: "#/components/schemas/InspectionStatisticsPhrases"
    PatchTasksMetadataRequest:
      type: object
      description: タスクIDとメタデータのkey-valueペア(Dictionary)です。
    InspectionStatisticsPhrases:
      type: object
      description: ラベル外指摘の集計結果
      required:
        - phrases
        - no_phrase
      properties:
        phrases:
          description: 定型指摘ごとの合計数。キーは定型指摘ID、値は指摘数
          type: object
          additionalProperties: {
            type: integer
          }
        no_phrase:
          description: 非定型指摘の合計数
          type: integer
    TaskPhaseStatistics:
      type: object
      required:
        - project_id
        - date
        - phases
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        date:
          type: string
          format: date
        phases:
          description: タスクのフェーズごとの集計結果
          type: array
          items:
            $ref: "#/components/schemas/PhaseStatistics"
    PhaseStatistics:
      type: object
      required:
        - phase
        - worktime
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        worktime:
          description: 累積作業時間（ISO 8601 duration）
          type: string
          example: "PT34H17M36.789S"
    LabelStatistics:
      type: object
      required:
        - label_id
        - completed
        - wip
      properties:
        label_id:
          $ref: "#/components/schemas/LabelId"
        completed:
          type: integer
          minimum: 0
          description: ラベルごとの受入が完了したアノテーション数
        wip:
          type: integer
          minimum: 0
          description: ラベルごとの受入が完了していないアノテーション数
    WorktimeStatistics:
      type: object
      required:
        - project_id
        - date
        - by_tasks
        - by_inputs
        - by_minutes
        - accounts
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        date:
          type: string
          format: date
        by_tasks:
          type: array
          description: タスク1個当たりの作業時間情報（動画プロジェクトの場合は空リスト）
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        by_inputs:
          type: array
          description: 画像1個当たりの作業時間情報（動画プロジェクトの場合は空リスト）
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        by_minutes:
          type: array
          description: 動画1分当たりの作業時間情報（画像プロジェクトの場合は空リスト）
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        accounts:
          type: array
          description: ユーザごとの作業時間情報
          items:
            $ref: "#/components/schemas/AccountWorktimeStatistics"
    WorktimeStatisticsItem:
      type: object
      required:
        - phase
        - histogram
        - average
        - standard_deviation
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        histogram:
          type: array
          items:
            $ref: "#/components/schemas/HistogramItem"
        average:
          description: 作業時間の平均（ISO 8601 duration）
          type: string
          example: "PT34H17M36.789S"
        standard_deviation:
          description: 作業時間の標準偏差（ISO 8601 duration）
          type: string
          example: "PT34H17M36.789S"
    HistogramItem:
      type: object
      required:
        - begin
        - end
        - count
      properties:
        begin:
          type: number
        end:
          type: number
        count:
          type: integer
    AccountWorktimeStatistics:
      type: object
      required:
        - account_id
        - by_tasks
        - by_inputs
        - by_minutes
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        by_tasks:
          description: ユーザごとのタスク1個当たりの作業時間情報（動画プロジェクトの場合は空リスト）
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        by_inputs:
          description: ユーザごとの画像1個当たりの作業時間情報（動画プロジェクトの場合は空リスト）
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        by_minutes:
          description: ユーザごとの動画1分当たりの作業時間情報（画像プロジェクトの場合は空リスト）
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
    Marker:
      type: object
      properties:
        marker_id:
          $ref: "#/components/schemas/MarkerId"
        title:
          type: string
        graph_type:
          description: マーカーの配置先グラフ
          $ref: "#/components/schemas/GraphType"
        marked_at:
          description: グラフ上のマーカー位置(x軸)
          type: string
          format: date
    Markers:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        markers:
          type: array
          items:
            $ref: "#/components/schemas/Marker"
        updated_datetime:
          type: string
          format: date
    GraphType:
      type: string
      enum:
        - task_progress
        - cumulative_labor_time_By_task_phase
        - number_of_inspections_per_inspection_phrase
        - number_of_task_rejections_by_member
        - labor_time_per_member
        - mean_labor_time_per_image
        - mean_labor_time_per_minute_of_movie
        - mean_labor_time_per_image_by_member
        - mean_labor_time_per_minute_of_movie_by_member
      description: |
        * `task_progress` - タスク進捗状況
        * `cumulative_labor_time_by_task_phase` - タスクフェーズ別累積作業時間
        * `number_of_inspections_per_inspection_phrase` - 検査コメント内容別指摘回数
        * `number_of_task_rejections_by_member` - メンバー別タスクが差戻された回数
        * `labor_time_per_member` - メンバー別作業時間
        * `mean_labor_time_per_image` - 画像一枚当たりの作業時間平均
        * `mean_labor_time_per_minute_of_movie` - 動画一分当たりの作業時間平均
        * `mean_labor_time_per_image_by_member` - メンバー別画像一枚当たりの作業時間平均
        * `mean_labor_time_per_minute_of_movie_by_member` - メンバー別動画一分当たりの作業時間平均
    PutMarkersRequest:
      type: object
      properties:
        markers:
          type: array
          items:
            $ref: "#/components/schemas/Marker"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    AnnotationSpecsV1:
      type: object
      required:
        - project_id
        - labels
        - inspection_phrases
        - metadata
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        labels:
          type: array
          items:
            $ref: "#/components/schemas/LabelV1"
        inspection_phrases:
          type: array
          items:
            $ref: "#/components/schemas/InspectionPhrase"
        updated_datetime:
          type: string
          format: date-time
          description: |
            アノテーション仕様の最終更新時刻
        option:
          $ref: "#/components/schemas/AnnotationSpecsOption"
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    AnnotationSpecsV2:
      type: object
      required:
        - project_id
        - labels
        - additionals
        - restrictions
        - inspection_phrases
        - format_version
        - metadata
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        labels:
          type: array
          items:
            $ref: "#/components/schemas/LabelV2"
        additionals:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataDefinitionV2"
        restrictions:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataRestriction"
        inspection_phrases:
          type: array
          items:
            $ref: "#/components/schemas/InspectionPhrase"
        format_version:
          type: string
          default: "2.1.0"
        updated_datetime:
          type: string
          format: date-time
          description: |
            アノテーション仕様の最終更新時刻
        option:
          $ref: "#/components/schemas/AnnotationSpecsOption"
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    AnnotationSpecsRequestV1:
      type: object
      required:
        - labels
        - inspection_phrases
        - comment
        - auto_marking
      properties:
        labels:
          type: array
          items:
            $ref: "#/components/schemas/LabelV1"
        inspection_phrases:
          type: array
          items:
            $ref: "#/components/schemas/InspectionPhrase"
        comment:
          type: string
        auto_marking:
          type: boolean
          default: false
          description: |
            trueが指定された場合、各統計グラフにマーカーを自動追加します。
            マーカーのタイトルには `comment` に指定された文字列が設定されます。
            `comment` が指定されていなかった場合は "アノテーション仕様の変更" という文字列が設定されます。
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
          description: |
            更新前アノテーション仕様の時刻( `updated_datetime` )を指定する。
            新規作成時は未指定。
        option:
          $ref: "#/components/schemas/AnnotationSpecsOption"
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    AnnotationSpecsRequestV2:
      type: object
      required:
        - labels
        - additionals
        - restrictions
        - inspection_phrases
        - comment
        - auto_marking
        - format_version
      properties:
        labels:
          type: array
          items:
            $ref: "#/components/schemas/LabelV2"
        additionals:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataDefinitionV2"
        restrictions:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataRestriction"
        inspection_phrases:
          type: array
          items:
            $ref: "#/components/schemas/InspectionPhrase"
        comment:
          type: string
        auto_marking:
          type: boolean
          default: false
          description: |
            trueが指定された場合、各統計グラフにマーカーを自動追加します。
            マーカーのタイトルには `comment` に指定された文字列が設定されます。
            `comment` が指定されていなかった場合は "アノテーション仕様の変更" という文字列が設定されます。
        format_version:
          type: string
          default: "2.1.0"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
          description: |
            更新前アノテーション仕様の時刻( `updated_datetime` )を指定する。
            新規作成時は未指定。
        option:
          $ref: "#/components/schemas/AnnotationSpecsOption"
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    AnnotationSpecsOption:
      oneOf:
        - $ref: "#/components/schemas/AnnotationSpecsMovieOption"
      description: |
        アノテーション仕様のオプション設定。

        現時点では動画プロジェクトでのみ利用・指定可能。動画以外のプロジェクトでは値なし。

        動画プロジェクトで値が未指定の場合、AnnotationSpecsOption内の値はすべてデフォルト値が指定されたものとして扱われる。
    AnnotationSpecsMovieOption:
      type: object
      required:
        - can_overwrap
      properties:
        can_overwrap:
          type: boolean
          default: true
          description: |
            動画プロジェクトのアノテーションに重複配置を許すか否か。
    AnnotationSpecsHistory:
      type: object
      required:
        - history_id
        - project_id
        - updated_datetime
        - url
      properties:
        history_id:
          type: string
        project_id:
          $ref: "#/components/schemas/ProjectId"
        updated_datetime:
          type: string
          format: date-time
        url:
          type: string
        account_id:
          $ref: "#/components/schemas/AccountId"
        comment:
          type: string
    InspectionPhrase:
      type: object
      required:
        - id
        - text
      properties:
        id:
          type: string
        text:
          $ref: "#/components/schemas/InternationalizationMessage"
    AnnotationType:
      type: string
      enum:
        - bounding_box
        - segmentation
        - segmentation_v2
        - polygon
        - polyline
        - point
        - classification
        - range
        - custom
      description: |
        * `bounding_box` - 矩形を表します。
        * `segmentation` - ピクセルレベルでの塗りつぶし（ラスター）を表します。
        * `segmentation_v2` - 塗りつぶしv2を表します。v2はSemantic Segmentationに特化しています。
        * `polygon` - ポリゴン（閉じた頂点集合）を表します。
        * `polyline` - ポリライン（開いた頂点集合）を表します。
        * `point` - 点を表します。
        * `classification` - 入力データ全体に対するアノテーションを表します。
        * `range` - 動画の区間を表します。
        * `custom` - カスタム
    AdditionalDataDefinitionType:
      type: string
      enum:
        - flag
        - integer
        - text
        - comment
        - choice
        - select
        - tracking
        - link
      description: |
        * `flag` - 真偽値
        * `integer` - 整数値
        * `text` - 自由記述（1行）
        * `comment` - 自由記述（複数行）
        * `choice` - 選択肢（ラジオボタン式）
        * `select` - 選択肢（ドロップダウン式）
        * `tracking` - 自由記述 (トラッキングID自動挿入)
        * `link` - アノテーションリンク
    PositionForMinimumBoundingBoxInsertion:
      type: object
      description: |
        `annotation_type` が `bounding_box` かつ `min_warn_rule` が `and` または `or` の場合のみ、挿入する最小矩形アノテーションの原点を指定できます。
        画像左上の座標が「x=0, y=0」です。
        未指定、もしくは「画像外に飛び出たアノテーション」を許可していないにも関わらず飛び出してしまう場合は、表示範囲の中央に挿入されます。
        「スキャンした帳票の記入欄」や「定点カメラで撮影した製品ラベル」など、アノテーションしたい位置やサイズが多くの画像で共通している場合に便利です。

        `annotation_type` が `bounding_box` 以外の場合は必ず未指定となります。
      required:
        - x
        - y
      properties:
        x:
          type: integer
        y:
          type: integer
    LabelV1:
      type: object
      required:
        - label_id
        - label_name
        - keybind
        - annotation_type
        - additional_data_definitions
        - color
        - annotation_editor_feature
        - allow_out_of_image_bounds
        - metadata
      properties:
        label_id:
          $ref: "#/components/schemas/LabelId"
        label_name:
          $ref: "#/components/schemas/InternationalizationMessage"
        keybind:
          type: array
          items:
            $ref: "#/components/schemas/Keybind"
        annotation_type:
          $ref: "#/components/schemas/AnnotationType"
        bounding_box_metadata:
          type: object
          required:
            - min_width
            - min_height
            - min_warn_rule
          properties:
            min_width:
              type: integer
            min_height:
              type: integer
            min_warn_rule:
              type: string
              default: or
            min_area:
              type: integer
              minimum: 1
              maximum: 1000000
            max_vertices:
              type: integer
            min_vertices:
              type: integer
            position_for_minimum_bounding_box_insertion:
              $ref: "#/components/schemas/PositionForMinimumBoundingBoxInsertion"
            tolerance:
              type: integer
        segmentation_metadata:
          type: object
          required:
            - min_width
            - min_height
            - min_warn_rule
          properties:
            min_width:
              type: integer
            min_height:
              type: integer
            min_warn_rule:
              type: string
              default: or
            tolerance:
              type: integer
        additional_data_definitions:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataDefinitionV1"
        color:
          $ref: "#/components/schemas/Color"
        annotation_editor_feature:
          $ref: "#/components/schemas/AnnotationEditorFeature"
        allow_out_of_image_bounds:
          type: boolean
          default: false
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    LabelV2:
      type: object
      required:
        - label_id
        - label_name
        - keybind
        - annotation_type
        - additional_data_definitions
        - color
        - annotation_editor_feature
        - allow_out_of_image_bounds
        - metadata
      properties:
        label_id:
          $ref: "#/components/schemas/LabelId"
        label_name:
          $ref: "#/components/schemas/InternationalizationMessage"
        keybind:
          type: array
          items:
            $ref: "#/components/schemas/Keybind"
        annotation_type:
          $ref: "#/components/schemas/AnnotationType"
        bounding_box_metadata:
          type: object
          required:
            - min_width
            - min_height
            - min_warn_rule
          properties:
            min_width:
              type: integer
            min_height:
              type: integer
            min_warn_rule:
              type: string
              default: or
            min_area:
              type: integer
              minimum: 1
              maximum: 1000000
            max_vertices:
              type: integer
            min_vertices:
              type: integer
            position_for_minimum_bounding_box_insertion:
              $ref: "#/components/schemas/PositionForMinimumBoundingBoxInsertion"
            tolerance:
              type: integer
        segmentation_metadata:
          type: object
          required:
            - min_width
            - min_height
            - min_warn_rule
          properties:
            min_width:
              type: integer
            min_height:
              type: integer
            min_warn_rule:
              type: string
              default: or
            tolerance:
              type: integer
        additional_data_definitions:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataDefinitionId"
        color:
          $ref: "#/components/schemas/Color"
        annotation_editor_feature:
          $ref: "#/components/schemas/AnnotationEditorFeature"
        allow_out_of_image_bounds:
          type: boolean
          default: false
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    Color:
      type: object
      required:
        - red
        - green
        - blue
      properties:
        red:
          type: integer
          minimum: 0
          maximum: 255
        green:
          type: integer
          minimum: 0
          maximum: 255
        blue:
          type: integer
          minimum: 0
          maximum: 255
    AnnotationEditorFeature:
      type: object
      required:
        - append
        - erase
        - freehand
        - rectangle_fill
        - polygon_fill
        - fill_near
      properties:
        append:
          type: boolean
        erase:
          type: boolean
        freehand:
          type: boolean
        rectangle_fill:
          type: boolean
        polygon_fill:
          type: boolean
        fill_near:
          type: boolean
    AdditionalDataDefinitionV1:
      type: object
      required:
        - additional_data_definition_id
        - read_only
        - name
        - default
        - keybind
        - type
        - choices
        - label_ids
        - metadata
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
        read_only:
          type: boolean
          default: false
        name:
          $ref: "#/components/schemas/InternationalizationMessage"
        default:
          $ref: "#/components/schemas/AdditionalDataDefaultType"
        keybind:
          type: array
          items:
            $ref: "#/components/schemas/Keybind"
        type:
          $ref: "#/components/schemas/AdditionalDataDefinitionType"
        choices:
          type: array
          items:
            type: object
            required:
              - choice_id
              - name
              - keybind
            properties:
              choice_id:
                $ref: "#/components/schemas/ChoiceId"
              name:
                $ref: "#/components/schemas/InternationalizationMessage"
              keybind:
                type: array
                items:
                  $ref: "#/components/schemas/Keybind"
        regex:
          type: string
        label_ids:
          type: array
          description: リンク属性において、リンク先として指定可能なラベルID（空の場合制限なし）
          items:
            type: string
        required:
          type: boolean
          description: リンク属性において、入力を必須とするかどうか
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    AdditionalDataDefinitionV2:
      type: object
      required:
        - additional_data_definition_id
        - read_only
        - name
        - default
        - keybind
        - type
        - choices
        - metadata
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
        read_only:
          type: boolean
          default: false
        name:
          $ref: "#/components/schemas/InternationalizationMessage"
        default:
          $ref: "#/components/schemas/AdditionalDataDefaultType"
        keybind:
          type: array
          items:
            $ref: "#/components/schemas/Keybind"
        type:
          $ref: "#/components/schemas/AdditionalDataDefinitionType"
        choices:
          type: array
          items:
            type: object
            required:
              - choice_id
              - name
              - keybind
            properties:
              choice_id:
                $ref: "#/components/schemas/ChoiceId"
              name:
                $ref: "#/components/schemas/InternationalizationMessage"
              keybind:
                type: array
                items:
                  $ref: "#/components/schemas/Keybind"
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。
          additionalProperties:
            type: string
    AdditionalDataRestriction:
      type: object
      required:
        - additional_data_definition_id
        - condition
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
        condition:
          $ref: "#/components/schemas/AdditionalDataRestrictionCondition"
    AdditionalDataRestrictionCondition:
      oneOf:
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionCanInput"
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionEquals"
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionNotEquals"
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionMatches"
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionNotMatches"
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionHasLabel"
        - $ref: "#/components/schemas/AdditionalDataRestrictionConditionImply"
      discriminator:
        propertyName: "_type"
        mapping:
          CanInput: "#/components/schemas/AdditionalDataRestrictionConditionCanInput"
          Equals: "#/components/schemas/AdditionalDataRestrictionConditionEquals"
          NotEquals: "#/components/schemas/AdditionalDataRestrictionConditionNotEquals"
          Matches: "#/components/schemas/AdditionalDataRestrictionConditionMatches"
          NotMatches: "#/components/schemas/AdditionalDataRestrictionConditionNotMatches"
          HasLabel: "#/components/schemas/AdditionalDataRestrictionConditionHasLabel"
          Imply: "#/components/schemas/AdditionalDataRestrictionConditionImply"
    AdditionalDataRestrictionConditionCanInput:
      type: object
      required:
        - _type
        - enable
      properties:
        _type:
          type: string
          description: |
            `CanInput`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "CanInput"
        enable:
          type: boolean
          description: |
            false を指定することで、入力を許可しないようにできます。
            Imply との組み合わせで、特定条件下のみ入力を許すといった制限ができます。
    AdditionalDataRestrictionConditionEquals:
      type: object
      required:
        - _type
        - value
      properties:
        _type:
          type: string
          description: |
            `Equals`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Equals"
        value:
          type: string
          description: 指定された値と等しいことを要求します。
    AdditionalDataRestrictionConditionNotEquals:
      type: object
      required:
        - _type
        - value
      properties:
        _type:
          type: string
          description: |
            `NotEquals`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "NotEquals"
        value:
          type: string
          description: |
            指定された値と異なることを要求します。
            value に "" を指定することで、入力を必須とすることができます。
    AdditionalDataRestrictionConditionMatches:
      type: object
      required:
        - _type
        - value
      properties:
        _type:
          type: string
          description: |
            `Matches`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Matches"
        value:
          type: string
          description: 指定された正規表現に合致することを要求します。
    AdditionalDataRestrictionConditionNotMatches:
      type: object
      required:
        - _type
        - value
      properties:
        _type:
          type: string
          description: |
            `NotMatches`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "NotMatches"
        value:
          type: string
          description: 指定された正規表現に合致しないことを要求します。
    AdditionalDataRestrictionConditionHasLabel:
      type: object
      required:
        - _type
        - labels
      properties:
        _type:
          type: string
          description: |
            `HasLabel`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "HasLabel"
        labels:
          type: array
          description: リンク属性において、リンク先として指定可能なラベルIDを制限します。
          items:
            type: string
    AdditionalDataRestrictionConditionImply:
      type: object
      required:
        - _type
        - premise
        - condition
      properties:
        _type:
          type: string
          description: |
            `Imply`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Imply"
        premise:
          $ref: "#/components/schemas/AdditionalDataRestriction"
          description: |
            premise で指定された条件を満たすとき、condition で指定された条件を満たすことを要求します。
        condition:
          $ref: "#/components/schemas/AdditionalDataRestrictionCondition"
    Keybind:
      type: object
      required:
        - code
        - shift
        - ctrl
        - alt
      properties:
        code:
          type: string
        shift:
          type: boolean
        ctrl:
          type: boolean
        alt:
          type: boolean
    Task:
      type: object
      required:
        - project_id
        - task_id
        - phase
        - phase_stage
        - status
        - input_data_id_list
        - work_time_span
        - updated_datetime
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          $ref: "#/components/schemas/TaskPhaseStage"
        status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id_list:
          type: array
          description: タスクに含まれる入力データのID
          items:
            $ref: "#/components/schemas/InputDataId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        histories_by_phase:
          type: array
          description: 簡易的なタスク履歴（あるフェーズを誰が担当したか）
          items:
            $ref: "#/components/schemas/TaskHistoryShort"
        work_time_span:
          type: integer
          description: 累計実作業時間(ミリ秒)
        number_of_rejections:
          type: integer
          deprecated: true
          description: |
            このタスクが差戻しされた回数（すべてのフェーズでの差戻し回数の合計

            このフィールドは、どのフェーズで何回差戻されたかを区別できないため、廃止予定です。
            `histories_by_phase` で各フェーズの回数を計算することで、差戻し回数が分かります。

            例）`acceptance`フェーズが3回ある場合、`acceptance`フェーズで2回差し戻しされたことになります。
        started_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
        sampling:
          type: string
          enum:
            - inspection_skipped
            - inspection_stages_skipped
            - acceptance_skipped
            - inspection_and_acceptance_skipped
          description: |
            * `inspection_skipped` - このタスクが抜取検査の対象外となり、検査フェーズをスキップしたことを表す。
            * `inspection_stages_skipped` - このタスクが抜取検査の対象外となり、検査フェーズのステージを一部スキップしたことを表す。
            * `acceptance_skipped` - このタスクが抜取検査の対象外となり、受入フェーズをスキップしたことを表す。
            * `inspection_and_acceptance_skipped` - このタスクが抜取検査の対象外となり、検査・受入フェーズをスキップしたことを表す

            未指定時はこのタスクが抜取検査の対象となったことを表す。(通常のワークフローを通過する)
        metadata:
          $ref: "#/components/schemas/TaskMetadata"
    TaskPhase:
      type: string
      enum:
        - annotation
        - inspection
        - acceptance
      description: |
        * `annotation` - 教師付け。
        * `inspection` - 中間検査。ワークフローが3フェーズのときのみ。
        * `acceptance` - 受入。
    TaskPhaseStage:
      type: integer
      minimum: 1
    TaskStatus:
      type: string
      enum:
        - not_started
        - working
        - on_hold
        - break
        - complete
        - rejected
        - cancelled
      description: |
        * `not_started` - 未着手。
        * `working` - 作業中。誰かが実際にエディタ上で作業している状態。
        * `on_hold` - 保留。作業ルールの確認などで作業できない状態。
        * `break` - 休憩中。
        * `complete` - 完了。次のフェーズへ進む
        * `rejected` - 差戻し。修正のため、`annotation`フェーズへ戻る。[operateTask](#operation/operateTask) APIのリクエストボディに渡すときのみ利用する。その他のAPIのリクエストやレスポンスには使われない。
        * `cancelled` - 提出取消し。修正のため、前フェーズへ戻る。[operateTask](#operation/operateTask) APIのリクエストボディに渡すときのみ利用する。その他のAPIのリクエストやレスポンスには使われない。
    TaskMetadata:
      type: object
      description: |
        ユーザーが自由に登録できるkey-value型のメタデータです。
        keyにはメタデータ名、valueには値を指定してください。

        keyに指定できる文字種は次の通りです。

        * 半角英数字
        * `_` (アンダースコア)
        * `-` (ハイフン)

        valueに指定できる値は次の通りです。

        * 文字列
        * 数値
        * 真偽値
    TaskRequest:
      type: object
      required:
        - input_data_id_list
        - metadata
      properties:
        input_data_id_list:
          type: array
          items:
            $ref: "#/components/schemas/InputDataId"
        metadata:
          $ref: "#/components/schemas/TaskMetadata"
    TaskGenerateRequest:
      type: object
      required:
        - task_generate_rule
        - project_last_updated_datetime
      properties:
        task_generate_rule:
          $ref: "#/components/schemas/TaskGenerateRule"
        project_last_updated_datetime:
          type: string
          format: date-time
          description: プロジェクトの最終更新日時（[getProject](#operation/getProject) APIのレスポンス `updated_datetime`）。タスク生成の排他制御に使用。
    TaskGenerateRule:
      description: |
        * `TaskGenerateRuleByCount`: 1つのタスクに割りあてる入力データの個数を指定してタスクを生成します。
        * `TaskGenerateRuleByDirectory`: 入力データ名をファイルパスに見立て、ディレクトリ単位でタスクを生成します。
        * `TaskGenerateRuleByInputDataCsv`: 各タスクへの入力データへの割当を記入したCSVへのS3上のパスを指定してタスクを生成します。
      oneOf:
        - $ref: "#/components/schemas/TaskGenerateRuleByCount"
        - $ref: "#/components/schemas/TaskGenerateRuleByDirectory"
        - $ref: "#/components/schemas/TaskGenerateRuleByInputDataCsv"
      discriminator:
        propertyName: "_type"
        mapping:
          ByCount: "#/components/schemas/TaskGenerateRuleByCount"
          ByDirectory: "#/components/schemas/TaskGenerateRuleByDirectory"
          ByInputDataCsv: "#/components/schemas/TaskGenerateRuleByInputDataCsv"
    TaskGenerateRuleByCount:
      description: 1つのタスクに割りあてる入力データの個数を指定してタスクを生成します。
      type: object
      required:
        - task_id_prefix
        - allow_duplicate_input_data
        - input_data_count
        - input_data_order
      properties:
        task_id_prefix:
          type: string
          description: |
            生成するタスクIDのプレフィックス。[値の制約についてはこちら。](#section/API-Convention/APIID)
        allow_duplicate_input_data:
          type: boolean
          description: falseのときは、既にタスクに使われている入力データを除外し、まだタスクに使われていない入力データだけを新しいタスクに割り当てます。trueのときは、既にタスクに使われている入力データを除外しません。
        input_data_count:
          type: integer
          description: 1つのタスクに割り当てる入力データの個数
          example: 10
        input_data_order:
          $ref: "#/components/schemas/InputDataOrder"
        _type:
          type: string
          description: |
            `ByCount`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "ByCount"
    TaskGenerateRuleByDirectory:
      description: 入力データ名をファイルパスに見立て、ディレクトリ単位でタスクを生成します。<br>
      type: object
      required:
        - task_id_prefix
      properties:
        task_id_prefix:
          type: string
          description: |
            生成するタスクIDのプレフィックス。[値の制約についてはこちら。](#section/API-Convention/APIID)
        input_data_name_prefix:
          type: string
          description: タスク生成対象の入力データ名プレフィックス
        _type:
          type: string
          description: |
            `ByDirectory`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "ByDirectory"
    TaskGenerateRuleByInputDataCsv:
      description: 各タスクへの入力データへの割当を記入したCSVへのS3上のパスを指定してタスクを生成します。
      type: object
      required:
        - csv_data_path
      properties:
        csv_data_path:
          type: string
          description: 各タスクへの入力データへの割当を記入したCSVへのS3上のパス
          example: "s3://ANNOFAB-BUCKET/PATH/TO/CSV"
        _type:
          type: string
          description: |
            `ByInputDataCsv`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "ByInputDataCsv"
    InputDataOrder:
      type: string
      enum:
        - name_asc
        - name_desc
        - random
      description: |
        タスクに割り当てる入力データの順序

        * `name_asc` - 入力データ名 昇順（a, b, c, ...）。日付や番号などの連続するデータ名を扱う場合に推奨
        * `name_desc` - 入力データ名 降順（z, y, x, ...）
        * `random` - ランダム
    TaskOperation:
      type: object
      required:
        - status
        - last_updated_datetime
      properties:
        status:
          $ref: "#/components/schemas/TaskStatus"
          description: |
            次に遷移させるタスクの状態。[詳細はこちら](#section/TaskStatus)。
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
          description: |
            タスクの最終更新日時
        account_id:
          $ref: "#/components/schemas/AccountId"
          description: 変更後の担当者のアカウントID。担当者を未割り当てにする場合は未指定。
        force:
          type: boolean
          default: false
          description: |
            タスクの強制操作を行う場合に立てるフラグ。現在、強制操作は強制差戻しのみがサポートされています。
    TaskAssignRequest:
      type: object
      required:
        - request_type
      properties:
        request_type:
          $ref: "#/components/schemas/TaskAssignRequestType"
    TaskAssignRequestType:
      description: |
        * `TaskAssignRequestTypeRandom`: タスクフェーズのみを指定してランダムにタスクを自身に割当します。プロジェクト設定でタスクのランダム割当を有効にした場合のみ利用できます。
        * `TaskAssignRequestTypeSelection`: 担当者とタスクを明示的に指定してタスクを割当します。プロジェクトオーナーもしくはチェッカーのみ、自身以外のプロジェクトメンバーを担当者に指定できます。プロジェクト設定でタスクの選択割当を有効にした場合のみ利用できます。
      oneOf:
        - $ref: "#/components/schemas/TaskAssignRequestTypeRandom"
        - $ref: "#/components/schemas/TaskAssignRequestTypeSelection"
      discriminator:
        propertyName: "_type"
        mapping:
          Random: "#/components/schemas/TaskAssignRequestTypeRandom"
          Selection: "#/components/schemas/TaskAssignRequestTypeSelection"
    TaskAssignRequestTypeRandom:
      type: object
      required:
        - phase
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
          description: 割当するタスクフェーズ。[詳細はこちら](#section/TaskPhase)
        _type:
          type: string
          description: Random
          example: "Random"
    TaskAssignRequestTypeSelection:
      type: object
      required:
        - user_id
        - task_ids
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
          description: タスクを誰に割当するか
        task_ids:
          description: 割当するタスクのID
          type: array
          items:
            $ref: "#/components/schemas/TaskId"
        _type:
          type: string
          description: Selection
          example: "Selection"
    TaskHistoryShort:
      description: タスクのあるフェーズを誰が担当したかを表します。
      type: object
      required:
        - phase
        - phase_stage
        - account_id
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          default: 1
          minimum: 1
        account_id:
          $ref: "#/components/schemas/AccountId"
        worked:
          type: boolean
          description: そのフェーズでタスクの作業を行ったかどうか（行った場合はtrue）
          default: false
    TaskHistory:
      description: タスクのあるフェーズで、誰がいつどれくらいの作業時間を費やしたかを表すタスク履歴です。
      type: object
      required:
        - project_id
        - task_id
        - task_history_id
        - accumulated_labor_time_milliseconds
        - phase
        - phase_stage
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_history_id:
          $ref: "#/components/schemas/TaskHistoryId"
        started_datetime:
          type: string
          format: date-time
        ended_datetime:
          type: string
          format: date-time
        accumulated_labor_time_milliseconds:
          type: string
          description: 累計実作業時間（ISO 8601 duration）
          example: "PT34H17M36.789S"
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          minimum: 1
        account_id:
          $ref: "#/components/schemas/AccountId"
    TaskHistoryEvent:
      description: タスク履歴イベントは、タスクの状態が変化した１時点を表します。作業時間は、複数のこれらイベントを集約して計算するものなので、このオブジェクトには含まれません。
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_history_id:
          $ref: "#/components/schemas/TaskHistoryId"
        created_datetime:
          type: string
          format: date-time
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          default: 1
          minimum: 1
        status:
          $ref: "#/components/schemas/TaskStatus"
        account_id:
          $ref: "#/components/schemas/AccountId"
        request:
          $ref: "#/components/schemas/TaskOperation"
    TaskInputValidation:
      description: タスクの提出操作に対する入力データID別のバリデーション結果です。
      type: object
      properties:
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        annotation_errors:
          type: array
          items:
            $ref: "#/components/schemas/ValidationError"
        inspection_errors:
          type: array
          items:
            $ref: "#/components/schemas/InspectionValidationError"
    TaskValidation:
      description: タスクの全入力データに対するバリデーション結果です。
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        inputs:
          type: array
          items:
            $ref: "#/components/schemas/InputDataSummary"
    InputDataSummary:
      description: ある入力データのバリデーション結果です。入力データIDをキーに引けるようにMap[入力データID, バリデーション結果]となっています
      type: object
      properties:
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        inspection_summary:
          $ref: "#/components/schemas/InspectionSummary"
        annotation_summaries:
          type: array
          items:
            $ref: "#/components/schemas/ValidationError"
    InspectionSummary:
      type: string
      enum:
        - no_inspection
        - no_comment_inspection
        - new_reply_to_unprocessed
        - new_unprocessed_inspection
        - unprocessed
        - complete
      description: |
        - `no_inspection` - 入力データに検査コメントが付けられていない。
        - `no_comment_inspection` - 入力データに空の検査コメントが付けられている。
        - `new_reply_to_unprocessed` - 現在進行中の検査・受入フェーズで未処理の検査コメントに対して新たに返信が付けられている。
        - `new_unprocessed_inspection` - 現在進行中の検査・受入フェーズでつけられた検査コメントのうち、未処理のものが1つ以上ある。
        - `unprocessed` - 過去の検査・受入フェーズでつけられた検査コメントのうち、未処理のものが1つ以上ある。
        - `complete` - 入力データにつけられた検査コメントで未処理のものがない。
    InputDataSet:
      description: 入力データセットの情報を表すデータ構造です。
      type: object
      required:
        - input_data_set_id
        - input_data_set_name
        - organization_id
        - input_data_type
      properties:
        input_data_set_id:
          $ref: "#/components/schemas/InputDataSetId"
        input_data_set_name:
          type: string
          description: 表示用の名前です。
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        input_data_type:
          $ref: "#/components/schemas/InputDataType"
        private_storage_arn:
          type: string
          description: |
            AWS IAMロール。ビジネスプランでのS3プライベートストレージの認可で使います。
            [S3プライベートストレージの認可の設定についてはこちら](/docs/faq/#m0b240)をご覧ください。
          example: "arn:aws:iam::123456789012:role/AnnoFabPrivateStorageAccessor"
        updated_datetime:
          type: string
          format: date-time
          description: 入力データセットの最終更新日時
    InputData:
      description: 入力データの情報を表すデータ構造です。
      type: object
      required:
        - input_data_id
        - project_id
        - input_data_name
        - input_data_path
        - updated_datetime
      properties:
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        project_id:
          deprecated: true
          $ref: "#/components/schemas/ProjectId"
        input_data_name:
          type: string
          description: 表示用の名前です。
        input_data_path:
          type: string
          example: "s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA"
          description: |
            入力データの実体が保存されたパスです。
            s3スキーマまたはhttpsスキーマのみサポートしています。
        url:
          type: string
          description: |
            入力データを取得するためのhttpsスキーマのURLです。

            このURLはセキュリティのために認証認可が必要となっており、URLだけでは入力データを参照できません。
            このURLは内部用であり、常に変更になる可能性があります。そのため、アクセスは保証外となります。
            また、このURLのレスポンスは最低1時間キャッシュされます。
            キャッシュを無効にしたい場合は、クエリパラメータにアクセス毎にランダムなUUIDなどを付与してください。

            設定の不備等でデータが取得できない場合、この属性は設定されません。
        etag:
          type: string
        original_input_data_path:
          type: string
          example: "s3://YOUR-BUCKET/PATH/TO/INPUT_DATA"
          description: |
            AF外部のストレージから登録された場合、その外部ストレージ中のパス。
            それ以外の場合は値なし
        original_resolution:
          deprecated: true
          $ref: "#/components/schemas/Resolution"
          description: |
            入力データの元画像サイズ。
            AnnoFabにアップロードされる入力データとS3プライベートストレージの場合のみ設定されます。
        resized_resolution:
          deprecated: true
          $ref: "#/components/schemas/Resolution"
          description: |
            入力データのリサイズ後サイズ。
            入力データ登録時に画像がリサイズされた場合のみ設定される。
        input_duration:
          deprecated: true
          type: number
          description: |
            入力データが動画の場合、動画の長さ（秒）。小数点以下はミリ秒以下を表します。

            動画の長さが取得できなかった場合、あるいは入力データが画像の場合は値なし。
        updated_datetime:
          type: string
          format: date-time
        sign_required:
          type: boolean
          description: |
            データがSigned Cookieによるクロスオリジン配信に対応しているか否かです。
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。主にカスタムエディタで使われることを想定しています。
          additionalProperties:
            type: string
        system_metadata:
          $ref: "#/components/schemas/SystemMetadata"
    SystemMetadata:
      oneOf:
        - $ref: "#/components/schemas/SystemMetadataImage"
        - $ref: "#/components/schemas/SystemMetadataMovie"
        - $ref: "#/components/schemas/SystemMetadataCustom"
      discriminator:
        propertyName: "_type"
        mapping:
          Image: "#/components/schemas/SystemMetadataImage"
          Movie: "#/components/schemas/SystemMetadataMovie"
          Custom: "#/components/schemas/SystemMetadataCustom"
      description: |
        * `SystemMetadataImage`: 画像プロジェクトの場合。画像データ固有のメタデータが保存されます。
        * `SystemMetadataMovie`: 動画プロジェクトの場合。動画データ固有のメタデータが保存されます。
        * `SystemMetadataCustom`: カスタムプロジェクトの場合。カスタムデータ固有のメタデータが保存されます。

        `metadata` プロパティとは違い、ユーザー側では値を編集できない読取専用のプロパティです。
    SystemMetadataImage:
      type: object
      required:
        - _type
      description: |
        画像データ用システムメタデータ。
      properties:
        original_resolution:
          $ref: "#/components/schemas/Resolution"
          description: |
            入力データの元画像サイズ。
            AnnoFabにアップロードされる入力データとS3プライベートストレージの場合のみ設定されます。
        resized_resolution:
          $ref: "#/components/schemas/Resolution"
          description: |
            入力データのリサイズ後サイズ。
            入力データ登録時に画像がリサイズされた場合のみ設定される。
        _type:
          type: string
          description: "`Image`"
          example: Image
    SystemMetadataMovie:
      type: object
      required:
        - _type
      description: |
        動画データ用システムメタデータ。
      properties:
        input_duration:
          type: number
          description: |
            入力データが動画の場合、動画の長さ（秒）。小数点以下はミリ秒以下を表します。
            動画の長さが取得できなかった場合は値なし。
        _type:
          type: string
          description: "`Movie`"
          example: Movie
    SystemMetadataCustom:
      type: object
      required:
        - _type
      description: |
        カスタムデータ用システムメタデータ。
        現行はプロパティがない形式的なオブジェクトです。
      properties:
        _type:
          type: string
          description: "`Custom`"
          example: Custom
    InputDataRequest:
      type: object
      required:
        - input_data_name
        - input_data_path
      properties:
        input_data_name:
          type: string
          description: 表示用の名前
        input_data_path:
          type: string
          example: "s3://YOUR-BUCKET/PATH/TO/OBJECT"
          description: |
            AnnoFabに登録する入力データの実体が保存されたパスです。

            対応スキーマ：
            * s3
            * https

            場面別の使い分け：
            * [一時データ保存先取得API](#operation/createTempPath)を使ってAFにアップロードした場合: `s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA`
            * [プライベートストレージ](/docs/faq/#prst9c)の場合
                * `https://YOUR-DOMAIN/PATH/TO/INPUT_DATA`
                * `s3://YOUR-BUCKET-FOR-PRIVATE-STORAGE/PATH/TO/INPUT_DATA`
                    * S3プライベートストレージのパスを登録する場合、[事前に認可の設定が必要](/docs/faq/#m0b240)です。
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
        sign_required:
          type: boolean
          description: |
            データがSigned Cookieによるクロスオリジン配信に対応しているか否かです。<br>
            このオプションを有効にする場合は、`input_data_path`として、AnnoFabのAWS IDをTrusted Signerとして登録したCloudFrontのURLを指定してください。
        metadata:
          type: object
          description: |
            ユーザーが自由に登録できるkey-value型のメタデータです。主にカスタムエディタで使われることを想定しています。
          additionalProperties:
            type: string
    SupplementaryData:
      type: object
      required:
        - project_id
        - input_data_id
        - supplementary_data_id
        - supplementary_data_name
        - supplementary_data_path
        - supplementary_data_type
        - supplementary_data_number
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        supplementary_data_id:
          $ref: "#/components/schemas/SupplementaryDataId"
        supplementary_data_name:
          type: string
          description: 表示用の名前
        supplementary_data_path:
          type: string
          example: "s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA"
          description: |
            補助情報の実体が保存されたパスです。
            s3スキーマまたはhttpsスキーマのみサポートしています。
        url:
          type: string
          format: uri
          deprecated: true
          description: このフィールドはAF内部での利用のみを想定しており、依存しないでください。
        etag:
          type: string
        supplementary_data_type:
          $ref: "#/components/schemas/SupplementaryDataType"
        supplementary_data_number:
          type: integer
          description: 表示順を表す数値（昇順）。同じ入力データに対して複数の補助情報で表示順が重複する場合、順序不定になります。
        updated_datetime:
          type: string
          format: date-time
    SupplementaryDataType:
      type: string
      enum:
        - image
        - text
        - custom
    SupplementaryDataRequest:
      type: object
      required:
        - supplementary_data_name
        - supplementary_data_path
        - supplementary_data_type
        - supplementary_data_number
      properties:
        supplementary_data_name:
          type: string
          description: 表示用の名前
        supplementary_data_path:
          type: string
          example: "s3://YOUR-BUCKET/PATH/TO/OBJECT"
          description: |
            AnnoFabに登録する補助情報の実体が保存されたパスです。

            対応スキーマ：s3, https

            * [一時データ保存先取得API](#operation/createTempPath)を使ってAFにアップロードしたファイルパスの場合
                * `s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA`
                * 補助情報作成/更新API成功時、アップロードしたファイルが一時データ保存先からコピーされます。
                    * APIのレスポンスからアップロードしたファイルのコピー先パス（s3スキーマ）を取得できます。
            * すでにAFに登録されている補助情報のパスの場合
                * `s3://ANNOFAB-SUPPLEMENTARY-BUCKET/PATH/TO/INPUT_DATA`
                * ファイルはコピーされません。
            * [プライベートストレージ](/docs/faq/#prst9c)のパスの場合
                * `https://YOUR-DOMAIN/PATH/TO/INPUT_DATA`
                * `s3://YOUR-BUCKET-FOR-PRIVATE-STORAGE/PATH/TO/INPUT_DATA`
                    * S3プライベートストレージのパスを登録する場合、[事前に認可の設定が必要](/docs/faq/#m0b240)です。
                * AFにファイルはコピーされません。
        supplementary_data_type:
          $ref: "#/components/schemas/SupplementaryDataType"

        supplementary_data_number:
          type: integer
          description: 表示順を表す数値（昇順）。同じ入力データに対して複数の補助情報で表示順が重複する場合、順序不定になります。
        last_updated_datetime:
          type: string
          format: date-time
    WebhookTestRequest:
      type: object
      properties:
        placeholders:
          description: プレースホルダ名と置換する値
          type: object
          example:
            SOME_PLACEHOLDER: value
            SOME_NAME: value2
    WebhookTestResponse:
      type: object
      properties:
        result:
          description: |
            * success: 通知先から正常なレスポンス（2xx系）を受け取った
            * failure: 通知先からエラーレスポンス（2xx系以外）を受け取った
            * error: リクエスト送信に失敗した、もしくはレスポンスを受信できなかった
          type: string
          enum: [success, failure, error]
          example: success
        request_body:
          description: 実際に送信されたリクエストボディ
          type: string
        response_status:
          description: 通知先から返されたHTTPステータスコード
          type: integer
          example: 200
        response_body:
          description: 通知先から返されたレスポンスボディ
          type: string
        message:
          description: result="error" 時のエラー内容等
          type: string
    BatchInputDataRequestItemDelete:
      type: object
      description: 入力データ削除
      required:
        - project_id
        - input_data_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        _type:
          type: string
          description: |
            `Delete`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    BatchTaskRequestItemDelete:
      type: object
      description: タスク削除
      required:
        - project_id
        - task_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        _type:
          type: string
          description: |
            `Delete`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    DataPath:
      type: object
      properties:
        url:
          type: string
          format: uri
          example: "https://s3.<REGION>.amazonaws.com/<ANNOFAB-TEMP-BUCKET>/<UUID>/<UUID>?param1=...&param2=..."
          description: ファイルアップロード用の一時URLです。このURLにファイルをアップロードします。
        path:
          type: string
          example: s3://<ANNOFAB-TEMPORARY-BUCKET-NAME>/<UUID>/<UUID>
          description: アップロードしたファイルをAFの [入力データ](#tag/af-input) や [補助情報](#tag/af-supplementary) に登録するとき、この`path`を指定します。
    InstructionImagePath:
      type: object
      required:
        - url
        - path
      properties:
        url:
          type: string
          format: uri
          example: "https://s3.<REGION>.amazonaws.com/<ANNOFAB-TEMP-BUCKET>/<UUID>/<UUID>?param1=...&param2=..."
          description: ファイルアップロード用の一時URLです。このURLにファイルをアップロードします。
        path:
          type: string
          format: url
          example: https://annofab.com/projects/{project_id}/instruction-images/{image_id}
          description: 作業ガイド画像のURL
    AnnotationQuery:
      type: object
      properties:
        task_id:
          $ref: "#/components/schemas/TaskId"
        exact_match_task_id:
          description: |
            タスクIDの検索方法を指定します。
            最大文字列長300文字。
            trueの場合は完全一致検索、falseの場合は中間一致検索です。
          type: boolean
          default: true
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        exact_match_input_data_id:
          description: |
            入力データIDの検索方法を指定します。
            最大文字列長300文字。
            trueの場合は完全一致検索、falseの場合は中間一致検索です。
          type: boolean
          default: true
        label_id:
          $ref: "#/components/schemas/LabelId"
        attributes:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalData"
        updated_from:
          description: |
            開始日・終了日を含む区間[updated_from, updated_to]でアノテーションの更新日を絞り込むときに使用する、開始日。updated_toより後ろに指定された場合、期間指定は開始日・終了日を含む区間[updated_to, updated_from]となる。未指定の場合、本日であるとして扱われる。
          type: string
          example: "20191010"
        updated_to:
          description: |
            開始日・終了日を含む区間[updated_from, updated_to]でアノテーションの更新日を絞り込むときに使用する、終了日。未指定の場合、本日であるとして扱われる。
          type: string
          example: "20191010"
    Annotation:
      type: object
      required:
        - project_id
        - task_id
        - input_data_id
        - details
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        details:
          type: array
          description: 矩形、ポリゴン、全体アノテーションなど個々のアノテーションの配列。
          items:
            $ref: "#/components/schemas/AnnotationDetail"
        updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    AnnotationDataHoldingType:
      type: string
      enum:
        - inner
        - outer
      description:  |
        * `inner` - アノテーションのデータ部をJSON内部に保持します。
        * `outer` - アノテーションのデータ部を外部ファイルの形式（画像など）で保持します
    AnnotationDetail:
      type: object
      required:
        - annotation_id
        - account_id
        - label_id
        - is_protected
        - data_holding_type
        - additional_data_list
      properties:
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        account_id:
          $ref: "#/components/schemas/AccountId"
          description: アノテーションを作成したユーザのアカウントID。
        label_id:
          $ref: "#/components/schemas/LabelId"
          description: ラベルID。[アノテーション仕様](#tag/af-annotation-specs)で定義されます。
        is_protected:
          description: |
            `true`の場合、アノテーションをアノテーションエディタ上での削除から保護できます。
            外部から取り込んだアノテーションに属性を追加するときなどに指定すると、データの削除を防げます。
          type: boolean
          default: false
        data_holding_type:
          $ref: "#/components/schemas/AnnotationDataHoldingType"
        data:
          $ref: "#/components/schemas/AnnotationData"
        path:
          type: string
          description: |
            外部ファイルに保存されたアノテーションのパス。`data_holding_type`が`inner`の場合は未指定です。
            レスポンスの場合は`annotation_id`と同じ値が格納されます。

            [putAnnotation](#operation/putAnnotation) APIのリクエストボディに渡す場合は、[createTempPath](#operation/createTempPath) APIで取得できる一時データ保存先S3パスを格納してください。
            更新しない場合は、[getEditorAnnotation](#operation/getEditorAnnotation) APIで取得した`path`をそのまま渡せます。

            外部ファイルのフォーマットは下表の通りです。

            <table>
            <tr><th>annotation_type</th><th>形式</th></tr>
            <tr><td>segmentation / segmentation_v2   </td><td>PNG画像。塗りつぶした部分は<code>rgba(255, 255, 255, 1) </code>、塗りつぶしていない部分は<code>rgba(0, 0, 0, 0) </code>。</td></tr>
            </table>
        etag:
          type: string
          description: 外部ファイルに保存されたアノテーションのETag。`data_holding_type`が`inner`の場合、または[putAnnotation](#operation/putAnnotation) APIのリクエストボディに渡す場合は未指定です。
        url:
          type: string
          format: uri
          description: 外部ファイルに保存されたアノテーションの認証済み一時URL。`data_holding_type`が`inner`の場合、または[putAnnotation](#operation/putAnnotation) APIのリクエストボディに渡す場合は未指定です。
        additional_data_list:
          type: array
          description: |
            各要素は、 [アノテーション仕様](#operation/getAnnotationSpecs)で定義された属性（`additional_data_definitions`内）のいずれかの要素と対応づけます。
            各要素は、どの属性なのかを表す`additional_data_definition_id`と値が必要です。値は、属性の種類に対応するキーに格納します（下表）。

            <table>
            <tr><th>アノテーション属性の種類<br>（<code>additional_data_definition</code>の<code>type</code>）</th><th>属性の値を格納するキー</th><th>データ型</th></tr>
            <tr><td><code>text</code>, <code>comment</code> または <code>tracking</code></td><td><code>comment</code></td><td>string</td></tr>
            <tr><td><code>flag<c/ode></td><td><code>flag</code></td><td>boolean</td></tr>
            <tr><td><code>integer</code></td><td><code>integer</code></td><td>integer</td></tr>
            <tr><td><code>choice</code> または <code>select</code></td><td><code>choice</code></td><td>string（選択肢ID）</td></tr>
            <tr><td><code>link</code></td><td><code>comment</code></td><td>string（アノテーションID）</td></tr>
            </table>
          items:
            $ref: "#/components/schemas/AdditionalData"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    AdditionalData:
      type: object
      required:
        - additional_data_definition_id
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
          description: 属性ID。[アノテーション仕様](#tag/af-annotation-specs)で定義されます。
        flag:
          type: boolean
          description: |
            `additional_data_definition`の`type`が`flag`のときの属性値。
        integer:
          type: integer
          description: |
            `additional_data_definition`の`type`が`integer`のときの属性値。
        comment:
          type: string
          description: |
            `additional_data_definition`の`type`が`text`,`comment`,`link` または `tracking`のときの属性値。
        choice:
          $ref: "#/components/schemas/ChoiceId"
          description: |
            `additional_data_definition`の`type`が`choice` または `select `のときの属性値（選択肢ID）。
    AdditionalDataValue:
      oneOf:
        - $ref: "#/components/schemas/AdditionalDataValueFlag"
        - $ref: "#/components/schemas/AdditionalDataValueInteger"
        - $ref: "#/components/schemas/AdditionalDataValueComment"
        - $ref: "#/components/schemas/AdditionalDataValueChoice"
        - $ref: "#/components/schemas/AdditionalDataValueTracking"
        - $ref: "#/components/schemas/AdditionalDataValueLink"
      discriminator:
        propertyName: "_type"
        mapping:
          Flag: "#/components/schemas/AdditionalDataValueFlag"
          Integer: "#/components/schemas/AdditionalDataValueInteger"
          Comment: "#/components/schemas/AdditionalDataValueComment"
          Choice: "#/components/schemas/AdditionalDataValueChoice"
          Tracking: "#/components/schemas/AdditionalDataValueTracking"
          Link: "#/components/schemas/AdditionalDataValueLink"
    AdditionalDataValueFlag:
      type: object
      required:
        - _type
        - value
      properties:
        _type:
          type: string
          description: Flag
          example: "Flag"
        value:
          type: boolean
          description: フラグのON(true)またはOFF(false)
    AdditionalDataValueInteger:
      type: object
      required:
        - _type
      properties:
        _type:
          type: string
          description: Integer
          example: "Integer"
        value:
          type: integer
          description: 整数値
    AdditionalDataValueComment:
      type: object
      required:
        - _type
      properties:
        _type:
          type: string
          description: Comment
          example: "Comment"
        value:
          type: string
          description: 自由記述
    AdditionalDataValueChoice:
      type: object
      required:
        - _type
      properties:
        _type:
          type: string
          description: Choice
          example: "Choice"
        value:
          $ref: "#/components/schemas/AdditionalDataChoiceValue"
    AdditionalDataChoiceValue:
      type: object
      required:
        - id
        - name
      properties:
        id:
          $ref: "#/components/schemas/ChoiceId"
          description: 選択された選択肢のID
        name:
          $ref: "#/components/schemas/InternationalizationMessage"
          description: 選択された選択肢の表示名
    AdditionalDataValueTracking:
      type: object
      required:
        - _type
      properties:
        _type:
          type: string
          description: Tracking
          example: "Tracking"
        value:
          type: string
          description: トラッキングID
    AdditionalDataValueLink:
      type: object
      required:
        - _type
      properties:
        _type:
          type: string
          description: Link
          example: "Link"
        value:
          type: string
          description: リンク先アノテーションID
    SingleAnnotation:
      type: object
      required:
        - project_id
        - task_id
        - input_data_id
        - detail
        - updated_datetime
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        detail:
          $ref: "#/components/schemas/SingleAnnotationDetail"
        updated_datetime:
          type: string
          format: date-time
    SimpleAnnotation:
      type: object
      required:
        - annotation_format_version
        - project_id
        - task_id
        - task_phase
        - task_phase_stage
        - task_status
        - input_data_id
        - input_data_name
        - details
      properties:
        annotation_format_version:
          $ref: "#/components/schemas/AnnotationFormatVersion"
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_phase:
          $ref: "#/components/schemas/TaskPhase"
        task_phase_stage:
          type: integer
          default: 1
          minimum: 1
        task_status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        input_data_name:
          type: string
          description: 入力データ名
        details:
          type: array
          description: 矩形、ポリゴン、全体アノテーションなど個々のアノテーションの配列。
          items:
            $ref: "#/components/schemas/SimpleAnnotationDetail"
        updated_datetime:
          type: string
          format: date-time
          description: 更新日時。アノテーションが一つもない場合（教師付作業が未着手のときなど）は、未指定。
    BatchAnnotation:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        additional_data_list:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalData"
        updated_datetime:
          type: string
          format: date-time
    BatchAnnotationRequestItemPut:
      type: object
      description: アノテーション更新
      required:
        - data
      properties:
        data:
          $ref: "#/components/schemas/BatchAnnotation"
        _type:
          type: string
          description: |
            `Put`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Put"
    BatchAnnotationRequestItemDelete:
      type: object
      description: アノテーション削除
      required:
        - project_id
        - task_id
        - input_data_id
        - annotation_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        updated_datetime:
          type: string
          format: date-time
        _type:
          type: string
          description: |
            `Delete`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    SingleAnnotationDetail:
      type: object
      required:
        - annotation_id
        - account_id
        - label_id
        - data_holding_type
        - additional_data_list
        - created_datetime
        - updated_datetime
      properties:
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        data_holding_type:
          $ref: "#/components/schemas/AnnotationDataHoldingType"
        data:
          $ref: "#/components/schemas/FullAnnotationData"
        etag:
          type: string
          description: data_holding_typeがouterの場合のみ存在し、データのETagが格納される
        url:
          type: string
          format: uri
          description: data_holding_typeがouterの場合のみ存在し、データへの一時URLが格納される
        additional_data_list:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalData"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    SimpleAnnotationDetail:
      type: object
      required:
        - label
        - annotation_id
        - data
        - attributes
      properties:
        label:
          type: string
          example: "pedestrian"
          description: |
            アノテーション仕様のラベル名です。
        annotation_id:
          type: string
          example: "acb5359e-be2e-402b-b59a-b5fdbb378ad9"
          description: |
            個々のアノテーションにつけられたIDです。
        data:
          $ref: "#/components/schemas/FullAnnotationData"
        attributes:
          type: object
          description: |
            キーに属性の名前、値に各属性の値が入った辞書構造です。
          example:
            maker: "AAA Motors"
            size: 12345
            is_foo_bar_buz: true
    FullAnnotation:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_phase:
          $ref: "#/components/schemas/TaskPhase"
        task_phase_stage:
          type: integer
          default: 1
          minimum: 1
        task_status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        input_data_name:
          type: string
        details:
          type: array
          items:
            $ref: "#/components/schemas/FullAnnotationDetail"
        updated_datetime:
          type: string
          format: date-time
        annotation_format_version:
          $ref: "#/components/schemas/AnnotationFormatVersion"
    FullAnnotationDetail:
      type: object
      properties:
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        user_id:
          $ref: "#/components/schemas/UserId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        label_name:
          $ref: "#/components/schemas/InternationalizationMessage"
        annotation_type:
          $ref: "#/components/schemas/AnnotationType"
        data_holding_type:
          $ref: "#/components/schemas/AnnotationDataHoldingType"
        data:
          $ref: "#/components/schemas/FullAnnotationData"
        additional_data_list:
          type: array
          items:
            $ref: "#/components/schemas/FullAnnotationAdditionalData"
    AnnotationData:
      description: |
        アノテーションの座標値や区間などのデータ。
        `annotation_type` に応じて `string` や `object` の構造が変わります。

        API レスポンスに使われる場合は常に `string` 形式です。
        [putAnnotation](#operation/putAnnotation) APIのリクエストボディに渡す場合は `string` に加え、`object` 形式も使用できます。
      oneOf:
        - $ref: "#/components/schemas/FullAnnotationDataString"
        - $ref: "#/components/schemas/FullAnnotationData"
    FullAnnotationDataString:
      type: string
      example: "1,1,5,5"
      description: |
        アノテーション座標値や区間などの文字列表現です。
        アノテーション種類（`annotation_type`）とデータ格納形式（`data_holding_type`）に応じて、以下のとおり表現が変わります。

        <table>
        <tr><th>annotation_type</th><th>data_holding_type</th><th>文字列表現</th></tr>
        <tr><td>bounding_box</td><td>inner</td><td><code>"左上x,左上y,右下x,右下y"</code></td></tr>
        <tr><td>point</td><td>inner</td><td><code>"x1,y1"</code></td></tr>
        <tr><td>polygon / polyline</td><td>inner</td><td><code>"x1,y1,x2,y2, ... "</code></td></tr>
        <tr><td>range </td><td>inner</td><td><code>"開始時間(ミリ秒),終了時間(ミリ秒) "</code></td></tr>
        <tr><td>classification</td><td>inner</td><td><code>null</code></td></tr>
        <tr><td>segmentation</td><td>outer</td><td><code>null</code></td></tr>
        <tr><td>segmentation_v2</td><td>outer</td><td><code>null</code></td></tr>
        </table>
    FullAnnotationData:
      oneOf:
        - $ref: "#/components/schemas/FullAnnotationDataClassification"
        - $ref: "#/components/schemas/FullAnnotationDataSegmentation"
        - $ref: "#/components/schemas/FullAnnotationDataSegmentationV2"
        - $ref: "#/components/schemas/FullAnnotationDataBoundingBox"
        - $ref: "#/components/schemas/FullAnnotationDataPoints"
        - $ref: "#/components/schemas/FullAnnotationDataSinglePoint"
        - $ref: "#/components/schemas/FullAnnotationDataRange"
        - $ref: "#/components/schemas/FullAnnotationDataUnknown"
      discriminator:
        propertyName: "_type"
        mapping:
          Classification: "#/components/schemas/FullAnnotationDataClassification"
          Segmentation: "#/components/schemas/FullAnnotationDataSegmentation"
          SegmentationV2: "#/components/schemas/FullAnnotationDataSegmentationV2"
          BoundingBox: "#/components/schemas/FullAnnotationDataBoundingBox"
          Points: "#/components/schemas/FullAnnotationDataPoints"
          SinglePoint: "#/components/schemas/FullAnnotationDataSinglePoint"
          Range: "#/components/schemas/FullAnnotationDataRange"
          Unknown: "#/components/schemas/FullAnnotationDataUnknown"
      description: |
        アノテーションのデータが格納されます。
          * `FullAnnotationDataClassification`: 入力データ全体に対するアノテーションデータです。
          * `FullAnnotationDataSegmentation`: ピクセルレベルでの塗りつぶし（ラスター）のアノテーションデータです。
          * `FullAnnotationDataSegmentationV2`: 塗りつぶしv2ののアノテーションデータです。塗りつぶしv2はSemantic Segmentationに特化しています。
          * `FullAnnotationDataBoundingBox`: 矩形のアノテーションデータです。
          * `FullAnnotationDataPoints`: ポリゴン（閉じた頂点集合）のアノテーションデータです。
          * `FullAnnotationDataSegmentation`: 点のアノテーションデータです。
          * `FullAnnotationDataRange`: 動画区間のアノテーションデータです。
    FullAnnotationDataClassification:
      type: object
      nullable: true
      required:
        - _type
      properties:
        _type:
          type: string
          description: Classification
          example: "Classification"
    FullAnnotationDataSegmentation:
      description: 塗っていないところは rgba(0,0,0,0)、塗ったところは rgba(255,255,255,1) の PNGデータをBase64エンコードしたもの。
      type: object
      nullable: true
      required:
        - data_uri
        - _type
      properties:
        data_uri:
          type: string
        _type:
          type: string
          description: Segmentation
          example: "Segmentation"
    FullAnnotationDataSegmentationV2:
      type: object
      nullable: true
      required:
        - data_uri
        - _type
      properties:
        data_uri:
          type: string
        _type:
          type: string
          description: SegmentationV2
          example: "SegmentationV2"
    FullAnnotationDataBoundingBox:
      description: annotation_type が bounding_boxの場合に、[左上頂点座標, 右下頂点座標]を {"x":int, "y":int} の形式で記述したもの。
      type: object
      required:
        - left_top
        - right_bottom
        - _type
      properties:
        left_top:
          $ref: "#/components/schemas/Point"
        right_bottom:
          $ref: "#/components/schemas/Point"
        _type:
          type: string
          description: BoundingBox
          example: "BoundingBox"
    FullAnnotationDataPoints:
      description: |
        頂点座標 {"x":int, "y":int} の配列。

        * annotation_type が polygon/polyline の場合: ポリゴン/ポリラインを構成する頂点の配列。
      type: object
      required:
        - points
        - _type
      properties:
        points:
          type: array
          items:
            $ref: "#/components/schemas/Point"
        _type:
          type: string
          description: Points
          example: "Points"
    FullAnnotationDataSinglePoint:
      description: annotation_type が pointの場合。
      type: object
      required:
        - point
        - _type
      properties:
        point:
          $ref: "#/components/schemas/Point"
        _type:
          type: string
          description: SinglePoint。
          example: "SinglePoint"
    FullAnnotationDataRange:
      description: annotation_type が rangeの場合に、[開始時間, 終了時間]を {"begin":number, "end":number} の形式で記述したもの。開始時間・終了時間の単位は秒で、精度はミリ秒まで。
      type: object
      required:
        - begin
        - end
        - _type
      properties:
        begin:
          type: number
          description: 開始時間（ミリ秒）。小数点以下はミリ秒以下を表します。
        end:
          type: number
          description: 終了時間（ミリ秒）。小数点以下はミリ秒以下を表します。
        _type:
          type: string
          description: Range
          example: "Range"
    FullAnnotationDataUnknown:
      description: annotation_typeにデータ構造が一致していない場合に、元のdata文字列をそのまま記述したもの。
      type: object
      required:
        - data
        - _type
      properties:
        data:
          type: string
        _type:
          type: string
          description: Unknown
          example: "Unknown"
    Point:
      description: 座標
      type: object
      required:
        - x
        - y
      properties:
        x:
          type: integer
        y:
          type: integer
    FullAnnotationAdditionalData:
      type: object
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
          description: 属性ID
        additional_data_definition_name:
          $ref: "#/components/schemas/InternationalizationMessage"
          description: 属性表示名
        type:
          $ref: "#/components/schemas/AdditionalDataDefinitionType"
        value:
          $ref: "#/components/schemas/AdditionalDataValue"
    BatchInspectionRequestItemPut:
      type: object
      description: 検査コメント更新
      required:
        - data
      properties:
        data:
          $ref: "#/components/schemas/Inspection"
        _type:
          type: string
          description: |
            `Put`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Put"
    BatchInspectionRequestItemDelete:
      type: object
      description: 検査コメント削除
      required:
        - project_id
        - task_id
        - input_data_id
        - inspection_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        inspection_id:
          $ref: "#/components/schemas/InspectionId"
        _type:
          type: string
          description: |
            `Delete`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    Inspection:
      type: object
      description: 検査コメント
      required:
        - project_id
        - task_id
        - input_data_id
        - inspection_id
        - phase
        - phase_stage
        - commenter_account_id
        - data
        - status
        - comment
        - created_datetime
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        inspection_id:
          $ref: "#/components/schemas/InspectionId"
        phase:
          $ref: "#/components/schemas/TaskPhase"
          description: 検査コメントを付与したときのタスクフェーズ。[詳細はこちら](#section/TaskPhase)
        phase_stage:
          type: integer
          description: 検査コメントを付与したときのフェーズのステージ
          default: 1
          minimum: 1
        commenter_account_id:
          $ref: "#/components/schemas/AccountId"
          description: 検査コメントを付与したユーザのアカウントID
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
          description: |
            検査コメントに紐づくアノテーションのID。アノテーションに紐付けられていない場合（アノテーションの付け忘れに対する指定など）は未指定。
            [詳細はこちら](#section/AnnotationId)。
        data:
          $ref: "#/components/schemas/InspectionData"
        parent_inspection_id:
          $ref: "#/components/schemas/InspectionId"
          description: |
            返信先の検査コメントの検査ID。返信先の検査コメントは「スレッド内の直前のコメント」ではなく「スレッドの先頭のコメント」を指します。
        phrases:
          type: array
          description: 参照している定型指摘のID。
          items:
            $ref: "#/components/schemas/PhraseId"
        comment:
          description: |
            検査コメントの中身
          type: string
          example: 枠がズレています
        status:
          $ref: "#/components/schemas/InspectionStatus"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    InspectionData:
      description: |
        検査コメントの座標値や区間。

        * `InspectionDataPoint`：点で検査コメントを付与したときの座標値
        * `InspectionDataPolyline`：ポリラインで検査コメントを付与したときの座標値
        * `InspectionDataTime`：検査コメントを付与した区間（動画プロジェクトの場合）
        * `InspectionDataCustom`：カスタム
      oneOf:
        - $ref: "#/components/schemas/InspectionDataPoint"
        - $ref: "#/components/schemas/InspectionDataPolyline"
        - $ref: "#/components/schemas/InspectionDataTime"
        - $ref: "#/components/schemas/InspectionDataCustom"
      discriminator:
        propertyName: "_type"
        mapping:
          Point: "#/components/schemas/InspectionDataPoint"
          Polyline: "#/components/schemas/InspectionDataPolyline"
          Time: "#/components/schemas/InspectionDataTime"
          Custom: "#/components/schemas/InspectionDataCustom"
    InspectionDataPoint:
      type: object
      description: |
        問題のある部分を示す座標
      required:
        - x
        - y
      properties:
        x:
          type: integer
        y:
          type: integer
        _type:
          type: string
          description: |
            `Point`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Point"
    InspectionDataPolyline:
      type: object
      description: |
        問題のある部分を示すポリライン
      required:
        - coordinates
      properties:
        coordinates:
          type: array
          description: |
            ポリラインを構成する頂点の配列
          items:
            type: object
            properties:
              x:
                type: integer
              y:
                type: integer
        _type:
          type: string
          description: |
            `Polyline`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Polyline"
    InspectionDataTime:
      type: object
      description: |
        問題のある時間帯を表す区間
      required:
        - start
        - end
      properties:
        start:
          type: number
          description: 開始時間（ミリ秒）。小数点以下はミリ秒以下を表します。
        end:
          type: number
          description: 終了時間（ミリ秒）。小数点以下はミリ秒以下を表します。
        _type:
          type: string
          description: |
            `Time`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Time"
    InspectionDataCustom:
      type: object
      properties:
        data:
          type: string
        _type:
          type: string
          description: |
            `Custom`
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Custom"
    Resolution:
      type: object
      required:
        - width
        - height
      properties:
        width:
          type: number
        height:
          type: number
    InspectionStatus:
      type: string
      enum:
        - annotator_action_required
        - no_correction_required
        - error_corrected
        - no_comment_inspection
      description: |
        * `annotator_action_required` - 未処置。`annotation`フェーズ担当者が何らかの回答をする必要あり
        * `no_correction_required` - 処置不要。`annotation`フェーズ担当者が、検査コメントによる修正は不要、と回答した
        * `error_corrected` - 修正済み。`annotation`フェーズ担当者が、検査コメントの指示どおり修正した
        * `no_comment_inspection` - 作成途中。検査コメントの中身が未入力
    AggregationResult:
      oneOf:
        - $ref: "#/components/schemas/CountResult"
      discriminator:
        propertyName: "_type"
        mapping:
          CountResult: "#/components/schemas/CountResult"
    CountResult:
      type: object
      properties:
        _type:
          type: string
          example: "CountResult"
          description: |
            `CountResult`
            [詳しくはこちら](#section/API-Convention/API-_type)
        name:
          type: string
          description: |
            複数の集約を区別するための名前です。

            `(フィールド名)_(集約内容)` のように命名されます。例えば `account_id` フィールドを `count` する場合、`account_id_count` となります。
        field:
          type: string
          description: |
            集約に使われたリソースのフィールド名です。

            リソースの属性のさらに属性を参照するときは、`foo.bar.buz` のようにドット区切りになります。
        doc_count:
          type: integer
          description: |
            集約の件数です。
        items:
          type: array
          items:
            $ref: "#/components/schemas/Count"
          description: |
            集約結果の値です。
    Count:
      type: object
      properties:
        key:
          type: string
          description: |
            集約対象の `field` の値です。
        count:
          type: integer
          description: |
            集約対象 `field` の値が `key` の値と等しかったリソースの件数です。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            この集約のサブ集約です。サブ集約がないときは空の配列になります。
    Instruction:
      type: object
      properties:
        html:
          type: string
          description: 作業ガイドのHTML
          example: "<p>test</p>"
        last_updated_datetime:
          type: string
          format: date-time
          description: |
            * [getInstruction](#operation/getInstruction) APIのレスポンスの場合: 最後に作業ガイドを更新した日時。
            * [putInstruction](#operation/putInstruction) APIのリクエストボディの場合: 最後に作業ガイドを更新した日時を指定する。まだ一度も保存した事がない場合は指定しない。
    InstructionHistory:
      type: object
      required:
        - history_id
        - account_id
        - updated_datetime
      properties:
        history_id:
          type: string
          description: 作業ガイドの履歴ID
        account_id:
          type: string
          description: 作業ガイドを更新したユーザのアカウントID
        updated_datetime:
          type: string
          format: date-time
          description: 作業ガイドの最終更新日時
    InstructionImage:
      type: object
      required:
        - image_id
        - path
        - url
        - etag
      properties:
        image_id:
          type: string
          description: 作業ガイド画像ID
        path:
          type: string
          example: "s3://ANNOFAB-BUCKET/PATH/TO/INSTRUCTION_IMAGE"
          description: |
            作業ガイド画像の実体が保存されたパスです。
        url:
          type: string
          format: uri
          example: https://annofab.com/projects/{project_id}/instruction-images/{image_id}
          description:
            作業ガイド画像を取得するための内部用URLです。
        etag:
          type: string
    ValidationError:
      oneOf:
        - $ref: "#/components/schemas/InvalidAnnotationData"
        - $ref: "#/components/schemas/DuplicatedSegmentationV2"
        - $ref: "#/components/schemas/InvalidValue"
        - $ref: "#/components/schemas/UnknownLinkTarget"
        - $ref: "#/components/schemas/InvalidLinkTarget"
        - $ref: "#/components/schemas/InvalidChoice"
        - $ref: "#/components/schemas/Duplicated"
        - $ref: "#/components/schemas/UnknownAdditionalData"
        - $ref: "#/components/schemas/OutOfImageBounds"
        - $ref: "#/components/schemas/OverlappedRangeAnnotation"
        - $ref: "#/components/schemas/UnknownLabel"
      discriminator:
        propertyName: "_type"
        mapping:
          InvalidAnnotationData: "#/components/schemas/InvalidAnnotationData"
          DuplicatedSegmentationV2: "#/components/schemas/DuplicatedSegmentationV2"
          InvalidValue: "#/components/schemas/InvalidValue"
          UnknownLinkTarget: "#/components/schemas/UnknownLinkTarget"
          InvalidLinkTarget: "#/components/schemas/InvalidLinkTarget"
          InvalidChoice: "#/components/schemas/InvalidChoice"
          Duplicated: "#/components/schemas/Duplicated"
          UnknownAdditionalData: "#/components/schemas/UnknownAdditionalData"
          OutOfImageBounds: "#/components/schemas/OutOfImageBounds"
          OverlappedRangeAnnotation: "#/components/schemas/OverlappedRangeAnnotation"
          UnknownLabel: "#/components/schemas/UnknownLabel"
    InvalidAnnotationData:
      type: object
      description: アノテーションデータ不正エラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        message:
          type: string
        _type:
          type: string
          description: InvalidAnnotationData
          example: "InvalidAnnotationData"
    DuplicatedSegmentationV2:
      type: object
      description: 塗りつぶしv2のラベルに対する1ラベルにつき1アノテーションまでの制約違反エラー
      properties:
        label_id:
          type: string
        annotation_ids:
          type: array
          items:
            type: string
        _type:
          type: string
          description: DuplicatedSegmentationV2
          example: "DuplicatedSegmentationV2"
    InvalidValue:
      type: object
      description: 値制約に合致しないエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        additional_data_definition_id:
          type: string
        _type:
          type: string
          description: InvalidValue
          example: "InvalidValue"
    UnknownLinkTarget:
      type: object
      description: 指定されたIDに該当するアノテーションが存在しないエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        additional_data_definition_id:
          type: string
        _type:
          type: string
          description: UnknownLinkTarget
          example: "UnknownLinkTarget"
    InvalidLinkTarget:
      type: object
      description: リンク先アノテーションが許可されているラベルでないエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        additional_data_definition_id:
          type: string
        _type:
          type: string
          description: InvalidLinkTarget
          example: "InvalidLinkTarget"
    InvalidChoice:
      type: object
      description: 選択肢不正エラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        additional_data_definition_id:
          type: string
        _type:
          type: string
          description: InvalidChoice
          example: "InvalidChoice"
    Duplicated:
      type: object
      description: 値の重複が許可されていない属性の重複エラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        additional_data:
          $ref: "#/components/schemas/AdditionalData"
        _type:
          type: string
          description: Duplicated
          example: "Duplicated"
    UnknownAdditionalData:
      type: object
      description: 何らかの原因で、アノテーション仕様にない属性がついているエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        additional_data_definition_id:
          type: string
        _type:
          type: string
          description: UnknownAdditionalData
          example: "UnknownAdditionalData"
    OutOfImageBounds:
      type: object
      description: 画像範囲外にアノテーションがはみ出しているエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        _type:
          type: string
          description: OutOfImageBounds
          example: "OutOfImageBounds"
    OverlappedRangeAnnotation:
      type: object
      description: 区間が重複しているアノテーションが存在している場合に発生するエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        _type:
          type: string
          description: OverlappedRangeAnnotation
          example: "OverlappedRangeAnnotation"
    UnknownLabel:
      type: object
      description: 何らかの原因で、アノテーション仕様にないラベルがついているエラー
      properties:
        label_id:
          type: string
        annotation_id:
          type: string
        _type:
          type: string
          description: UnknownLabel
          example: "UnknownLabel"
    InspectionValidationError:
      oneOf:
        - $ref: "#/components/schemas/NoCommentInspection"
        - $ref: "#/components/schemas/ReplyRequired"
        - $ref: "#/components/schemas/ActionRequired"
        - $ref: "#/components/schemas/InspectionOrReplyRequired"
        - $ref: "#/components/schemas/IllegalState"
      discriminator:
        propertyName: "_type"
        mapping:
          NoCommentInspection: "#/components/schemas/NoCommentInspection"
          ReplyRequired: "#/components/schemas/ReplyRequired"
          ActionRequired: "#/components/schemas/ActionRequired"
          InspectionOrReplyRequired: "#/components/schemas/InspectionOrReplyRequired"
          IllegalState: "#/components/schemas/IllegalState"
    NoCommentInspection:
      type: object
      description: 空の検査コメントがある時のエラー
      properties:
        inspection:
          $ref: "#/components/schemas/Inspection"
        _type:
          type: string
          description: NoCommentInspection
          example: "NoCommentInspection"
    ReplyRequired:
      type: object
      description: 返信が必要な検査コメントが残っている時のエラー
      properties:
        inspection:
          $ref: "#/components/schemas/Inspection"
        _type:
          type: string
          description: ReplyRequired
          example: "ReplyRequired"
    ActionRequired:
      type: object
      description: 対応が必要な検査コメントが残っている時のエラー
      properties:
        inspection:
          $ref: "#/components/schemas/Inspection"
        _type:
          type: string
          description: ActionRequired
          example: "ActionRequired"
    InspectionOrReplyRequired:
      type: object
      description: 新規検査コメントまたは未対応検査コメントへの返信が必要である時のエラー
      properties:
        _type:
          type: string
          description: InspectionOrReplyRequired
          example: "InspectionOrReplyRequired"
    IllegalState:
      type: object
      description: 作業が開始されていない、担当が割り当たっていない等のエラー
      properties:
        _type:
          type: string
          description: IllegalState
          example: "IllegalState"
    ProjectTaskCounts:
      type: object
      properties:
        task_counts:
          type: array
          items:
            type: object
            properties:
              phase:
                $ref: "#/components/schemas/TaskPhase"
              status:
                $ref: "#/components/schemas/TaskStatus"
              count:
                description: 該当するタスクの数
                type: number
    TemporaryUrlString:
      type: string
      description: |
        このURLは発行から1時間経過すると無効になります。
        URLを構成するドメイン、パス、クエリパラメータなどが変更になることがあります。
      example: "https://.."
    TemporaryUrl:
      type: object
      description: 認証済み一時URL
      properties:
        url:
          $ref: "#/components/schemas/TemporaryUrlString"
    AnnotationList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/SingleAnnotation"
          description: 現在のページ番号に含まれる0件以上のアノテーションです。
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまるアノテーションが0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    InputDataList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/InputData"
          description: 現在のページ番号に含まれる0件以上の入力データです。
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまる入力データが0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    InputDataSetList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/InputDataSet"
          description: 現在のページ番号に含まれる0件以上の入力データセットです。
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまる入力データが0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    JobInfoContainer:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/JobInfo"
        has_next:
          type: boolean
    MyOrganizationList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/MyOrganization"
          description: 現在のページ番号に含まれる0件以上の所属組織です。
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまる所属組織が0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    ProjectList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/Project"
          description: 現在のページ番号に含まれる0件以上のプロジェクトです。
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまるプロジェクトが0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    OrganizationMemberList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/OrganizationMember"
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまる組織メンバーが0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    OrganizationPluginList:
        type: object
        properties:
          list:
            type: array
            items:
              $ref: "#/components/schemas/OrganizationPlugin"
          page_no:
            type: number
            description: 現在のページ番号です。
          total_page_no:
            type: number
            description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまるプロジェクトが0件であっても、総ページ数は1となります。
          total_count:
            type: number
            description: 検索結果の総件数。
    ProjectMemberList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/ProjectMember"
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまるプロジェクトメンバーが0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    ProjectContainer:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/Project"
        has_next:
          type: boolean
    TaskList:
      type: object
      properties:
        list:
          type: array
          items:
            $ref: "#/components/schemas/Task"
          description: 現在のページ番号に含まれる0件以上のタスクです。
        page_no:
          type: number
          description: 現在のページ番号です。
        total_page_no:
          type: number
          description: 指定された条件にあてはまる検索結果の総ページ数。検索条件に当てはまるタスク0件であっても、総ページ数は1となります。
        total_count:
          type: number
          description: 検索結果の総件数。
        over_limit:
          type: boolean
          description: 検索結果が1万件を超えた場合にtrueとなる。
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
          description: |
            [Aggregationによる集約結果](#section/API-Convention/AggregationResult)。
    BatchAnnotationRequestItem:
      oneOf:
        - $ref: "#/components/schemas/BatchAnnotationRequestItemPut"
        - $ref: "#/components/schemas/BatchAnnotationRequestItemDelete"
      discriminator:
        propertyName: "_type"
        mapping:
          Put: "#/components/schemas/BatchAnnotationRequestItemPut"
          Delete: "#/components/schemas/BatchAnnotationRequestItemDelete"
    BatchInspectionRequestItem:
      oneOf:
        - $ref: "#/components/schemas/BatchInspectionRequestItemPut"
        - $ref: "#/components/schemas/BatchInspectionRequestItemDelete"
      discriminator:
        propertyName: "_type"
        mapping:
          Put: "#/components/schemas/BatchInspectionRequestItemPut"
          Delete: "#/components/schemas/BatchInspectionRequestItemDelete"
    BatchInputDataRequestItem:
      oneOf:
        - $ref: "#/components/schemas/BatchInputDataRequestItemDelete"
      discriminator:
        propertyName: "_type"
        mapping:
          Delete: "#/components/schemas/BatchInputDataRequestItemDelete"
    BatchTaskRequestItem:
      oneOf:
        - $ref: "#/components/schemas/BatchTaskRequestItemDelete"
      discriminator:
        propertyName: "_type"
        mapping:
          Delete: "#/components/schemas/BatchTaskRequestItemDelete"
    AdditionalDataDefaultType:
      oneOf:
        - type: boolean
        - type: integer
        - type: string
      description: |
        属性の初期値です。

        初期値を指定する場合、属性の種類に応じて次の値を指定します。初期値を設定しない場合には空文字を指定します。

        * type が flag の場合: 真偽値(`true` or `false`)
        * type が integer の場合: 整数値
        * type が text の場合: 文字列
        * type が comment の場合: 文字列
        * type が choice の場合: 選択肢(`choices`)の `choice_id`
        * type が select の場合: 選択肢(`choices`)の `choice_id`

        属性の種類に対して有効でない初期値を設定した場合、その設定は無視されます。

        なお、トラッキングとリンクには初期値を設定できません。
    DeleteProjectResponseWrapper:
      oneOf:
        - $ref: "#/components/schemas/Project"
        - $ref: "#/components/schemas/DeleteProjectResponse"
    ProjectCopyResponseWrapper:
      oneOf:
        - $ref: "#/components/schemas/Project"
        - $ref: "#/components/schemas/ProjectCopyResponse"
    PostProjectTasksUpdateResponseWrapper:
      oneOf:
        - $ref: "#/components/schemas/Message"
        - $ref: "#/components/schemas/PostProjectTasksUpdateResponse"
    PutProjectResponseWrapper:
      oneOf:
        - $ref: "swagger-api-components.yaml#/components/schemas/Project"
        - $ref: "swagger-api-components.yaml#/components/schemas/PutProjectResponse"
    AnnotationSpecs:
      oneOf:
        - $ref: "#/components/schemas/AnnotationSpecsV1"
        - $ref: "#/components/schemas/AnnotationSpecsV2"
    AnnotationSpecsRequest:
      oneOf:
        - $ref: "#/components/schemas/AnnotationSpecsRequestV1"
        - $ref: "#/components/schemas/AnnotationSpecsRequestV2"
    TaskGenerateResponseWrapper:
      oneOf:
        - $ref: "#/components/schemas/Project"
        - $ref: "#/components/schemas/TaskGenerateResponse"
    PostAnnotationArchiveUpdateResponseWrapper:
      oneOf:
        - $ref: "#/components/schemas/Message"
        - $ref: "#/components/schemas/PostAnnotationArchiveUpdateResponse"
    MessageOrJobInfo:
      oneOf:
        - $ref: "#/components/schemas/Message"
        - $ref: "#/components/schemas/JobInfo"
