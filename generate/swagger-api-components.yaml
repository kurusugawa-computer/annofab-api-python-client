  securitySchemes:
    SignedCookieKeyPairId:
      description: |
        認証/認可には、[sign-url](#operation/getSignedAccessV2) APIで取得した署名済みCookieを使います。
      type: "apiKey"
      in: "cookie"
      name: "CloudFront-Key-Pair-Id"
    SignedCookiePolicy:
      description: |
        認証/認可には、[sign-url](#operation/getSignedAccessV2) APIで取得した署名済みCookieを使います。
      type: "apiKey"
      in: "cookie"
      name: "CloudFront-Policy"
    SignedCookieSignature:
      description: |
        認証/認可には、[sign-url](#operation/getSignedAccessV2) APIで取得した署名済みCookieを使います。
      type: "apiKey"
      in: "cookie"
      name: "CloudFront-Signature"
    EveryoneRequestBody:
      description: |
        AnnoFabのユーザーなら誰でも利用できます。
  
        認証/認可には、リクエストボディに含まれるパスワード、トークン、または何らかの検証コードを用います。
        詳しくは個別のAPIの説明を確認してください。
      type: "http"
      scheme: "requestBody"
    EveryoneQueryParameter:
      description: |
        AnnoFabのユーザーなら誰でも利用できます。
  
        認証/認可には、クエリパラメータに含まれるトークンまたは何らかの検証コードを用います。
        詳しくは個別のAPIの説明を確認してください。
      type: "http"
      scheme: "requestBody"
    Everyone:
      description: |
        AnnoFabのユーザーなら誰でも利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    AnnoFabAdminOnly:
      description: |
        AnnoFabのシステム管理者のみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    AllProjectMember:
      description: |
        プロジェクトに所属するユーザーなら誰でも利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectAccepter:
      description: |
        プロジェクトのオーナーまたはプロジェクトのチェッカーのみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectDataUser:
      description: |
        プロジェクトのオーナーまたはプロジェクトのアノテーションユーザーのみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectAccepterOrDataUser:
      description: |
        プロジェクトのオーナー/チェッカー/アノテーションユーザーのいずれかのみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    ProjectOwner:
      description: |
        プロジェクトのオーナーのみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    AllOrganizationMember:
      description: |
        組織に所属するユーザーなら誰でも利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    OrganizationAdministrator:
      description: |
        組織のオーナーまたは組織の管理者のみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
    OrganizationOwner:
      description: |
        組織のオーナーのみ利用できます。
  
        認証/認可には、HTTPリクエストの `Authorization` ヘッダーに格納されたIDトークンを用います。
        IDトークンは [login](#operation/login) または [refreshToken](#operation/refreshToken) API で取得できます。
      type: "apiKey"
      name: "Authorization"
      in: "header"
  responses:
    SuccessMessage:
      description: 成功時のメッセージ
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/Message"
    ErrorForbiddenResource:
      description: 権限エラー
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorForbiddenResource"
    ErrorMissingResource:
      description: 存在しないリソースを指定された
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorMissingResource"
    ErrorUnauthorizedApi:
      description: 認証エラー
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorUnauthorizedApi"
    ErrorInvalidRequest:
      description: リクエスト形式が正しくない。必要な属性が足りなかったり、属性が特定の値
      content:
        application/json:
          schema:
            # TODO このエラー定義には複数のschemaのエラーが該当しうる。それを記述する(KRSANNOFAC-1502)
            $ref: "#/components/schemas/Errors"
    ErrorUnderMaintenance:
      description: システムメンテナンス中
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorUnderMaintenance"
    ErrorRefreshTokenExpired:
      description: リフレッシュトークン有効期限切れのため、明示的にログインする必要があります
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/ErrorRefreshTokenExpired"
  schemas:
    CacheRecord:
      type: object
      properties:
        input:
          type: string
        members:
          type: string
        project:
          type: string
        instruction:
          type: string
        specs:
          type: string
        statistics:
          type: string
        organization:
          type: string
        supplementary:
          type: string
    Errors:
      type: object
      properties:
        errors:
          type: array
          items:
            $ref: "#/components/schemas/Error"
        context:
          type: object
          description: 内部補足情報
    Error:
      type: object
      properties:
        error_code:
          type: string
        message:
          type: string
          description: エラーの概要
        ext:
          type: object
          description: 補足情報
    ErrorInvalidBody:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: INVALID_BODY
        context:
          type: object
          description: 内部補足情報
    ErrorInvalidQueryParam:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: INVALID_QUERYPARAM
        context:
          type: object
          description: 内部補足情報
    ErrorMissingNecessaryQueryParam:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: MISSING_NECESSARY_QUERYPARAM
        context:
          type: object
          description: 内部補足情報
    ErrorInvalidPath:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: INVALID_PATH
        context:
          type: object
          description: 内部補足情報
    ErrorUnauthorizedApi:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: UNAUTHORIZED_API
        context:
          type: object
          description: 内部補足情報
    ErrorLoginFailed:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: LOGIN_FAILED
        context:
          type: object
          description: 内部補足情報
    ErrorPasswordResetRequired:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: PASSWORD_RESET_REQUIRED
        context:
          type: object
          description: 内部補足情報
    ErrorExpiredToken:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: EXPIRED_TOKEN
        context:
          type: object
          description: 内部補足情報
    ErrorRefreshTokenExpired:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: EXPIRED_REFRESH_TOKEN
        context:
          type: object
          description: 内部補足情報
    ErrorForbiddenResource:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: FORBIDDEN_RESOURCE
        context:
          type: object
          description: 内部補足情報
    ErrorMissingResource:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: MISSING_RESOURCE
        context:
          type: object
          description: 内部補足情報
    ErrorTimeout:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: TIMEOUT
        context:
          type: object
          description: 内部補足情報
    ErrorAlreadyUpdated:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: ALREADY_UPDATED
        context:
          type: object
          description: 内部補足情報
    ErrorStateMismatch:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: STATE_MISMATCH
        context:
          type: object
          description: 内部補足情報
    ErrorInternalServerError:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: INTERNAL_SERVER_ERROR
        context:
          type: object
          description: 内部補足情報
    ErrorUnderMaintenance:
      type: object
      properties:
        errors:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/Error'
              - properties:
                  error_code:
                    type: string
                    example: UNDER_MAINTENANCE
        context:
          type: object
          description: 内部補足情報
    Message:
      type: object
      properties:
        message:
          type: string
          description: 多言語対応
    InternationalizationMessage:
      type: object
      properties:
        messages:
          type: array
          items:
            type: object
            properties:
              lang:
                type: string
              message:
                type: string
        default_lang:
          type: string
    SignUpRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ConfirmSignUpRequest:
      type: object
      required:
        - account_id
        - user_id
        - password
        - username
        - lang
        - keylayout
        - confirmation_code
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        password:
          type: string
        username:
          type: string
        lang:
          type: string
        keylayout:
          type: string
        confirmation_code:
          type: string
    LoginRequest:
      type: object
      required:
        - user_id
        - password
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        password:
          type: string
    LoginResponse:
      type: object
      properties:
        token:
          $ref: "#/components/schemas/Token"
    Token:
      type: object
      properties:
        id_token:
          type: string
          description: 形式は[JWT](https://jwt.io/)。
        access_token:
          type: string
          description: 形式は[JWT](https://jwt.io/)。
        refresh_token:
          type: string
          description: 形式は[JWT](https://jwt.io/)。
    RefreshTokenRequest:
      type: object
      required:
        - refresh_token
      properties:
        refresh_token:
          type: string
    ChangePasswordRequest:
      type: object
      required:
        - user_id
        - old_password
        - new_password
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        old_password:
          type: string
        new_password:
          type: string
    PasswordResetRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ResetPasswordRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    ConfirmResetPasswordRequest:
      type: object
      required:
        - user_id
        - confirmation_code
        - new_password
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        confirmation_code:
          type: string
        new_password:
          type: string
    ResetEmailRequest:
      type: object
      required:
        - email
      properties:
        email:
          type: string
          format: email
    ConfirmResetEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    VerifyEmailRequest:
      type: object
      required:
        - token
      properties:
        token:
          $ref: "#/components/schemas/Token"
    ConfirmVerifyEmailRequest:
      type: object
      required:
        - token
        - confirmation_code
      properties:
        token:
          $ref: "#/components/schemas/Token"
        confirmation_code:
          type: string
    ConfirmAccountDeleteRequest:
      type: object
      required:
        - token
      properties:
        token:
          type: string
    Account:
      type: object
      required:
        - account_id
        - user_id
        - username
        - email
        - lang
        - keylayout
        - authority
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        email:
          type: string
          format: email
        lang:
          type: string
        keylayout:
          type: string
        authority:
          $ref: "#/components/schemas/AccountAuthority"
        updated_datetime:
          type: string
          format: date-time
    AccountAuthority:
      type: string
      enum:
        - user
        - admin
    MyAccount:
      allOf:
        - $ref: "#/components/schemas/Account"
        - type: object
          required:
            - errors
          properties:
            reset_requested_email:
              type: string
              format: email
            errors:
              type: array
              items:
                type: string
    PutMyAccountRequest:
      type: object
      required:
        - user_id
        - username
        - lang
        - keylayout
        - token
      properties:
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        lang:
          type: string
        keylayout:
          type: string
        token:
          $ref: "#/components/schemas/Token"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    LastUpdatedDatetime:
      type: string
      format: date-time
      description: |
        新規作成時は未指定、更新時は必須（更新前の日時）
    AcceptOrganizationInvitationRequest:
      type: object
      properties:
        token:
          type: string
    OrganizationActivity:
      type: object
      required:
        - organization_id
        - created_datetime
        - storage_usage_bytes
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        created_datetime:
          type: string
          format: date-time
        storage_usage_bytes:
          type: number
    Organization:
      type: object
      required:
        - organization_id
        - organization_name
        - email
        - price_plan
        - summary
        - created_datetime
        - updated_datetime
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        organization_name:
          type: string
        email:
          type: string
          format: email
        price_plan:
          $ref: "#/components/schemas/PricePlan"
        summary:
          $ref: "#/components/schemas/OrganizationSummary"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    OrganizationSummary:
      type: object
      properties:
        last_tasks_updated_datetime:
          type: string
          format: date-time
    PricePlan:
      type: string
      enum:
        - free
        - business
    OrganizationMember:
      type: object
      required:
        - organization_id
        - account_id
        - user_id
        - username
        - role
        - status
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        role:
          $ref: "#/components/schemas/OrganizationMemberRole"
        status:
          $ref: "#/components/schemas/OrganizationMemberStatus"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    OrganizationMemberRole:
      type: string
      enum:
        - owner
        - administrator
        - contributor
    OrganizationMemberStatus:
      type: string
      enum:
        - active
        - waiting_response
        - inactive
      description: |
        * `active` - 組織メンバーとして有効で、組織を閲覧したり、権限があれば編集できます。
        * `waiting_response` - 組織に招待され、まだ加入/脱退を返答していません。組織の一部を閲覧のみできます。
        * `inactive` - 脱退したメンバーを表します。組織を閲覧できません。
    MyOrganization:
      type: object
      properties:
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        name:
          type: string
        email:
          type: string
          format: email
        price_plan:
          $ref: "#/components/schemas/PricePlan"
        summary:
          $ref: "#/components/schemas/OrganizationSummary"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
        my_role:
          $ref: "#/components/schemas/OrganizationMemberRole"
        my_status:
          $ref: "#/components/schemas/OrganizationMemberStatus"
    OrganizationRegistrationRequest:
      type: object
      required:
        - organization_name
        - organization_email
        - price_plan
      properties:
        organization_name:
          type: string
        organization_email:
          type: string
          format: email
        price_plan:
          $ref: "#/components/schemas/PricePlan"
    PutOrganizationNameRequest:
      type: object
      required:
        - organization_id
        - organization_name
        - last_updated_datetime
      properties:
        organization_id:
          type: string
        organization_name:
          type: string
        last_updated_datetime:
          type: string
          format: date-time
    PutOrganizationMemberRoleRequest:
      type: object
      required:
        - role
      properties:
        role:
          $ref: "#/components/schemas/OrganizationMemberRole"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    InviteOrganizationMemberRequest:
      type: object
      properties:
        role:
          $ref: "#/components/schemas/OrganizationMemberRole"
    AccountId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    UserId:
      type: string
      example: "john_doe"
    OrganizationId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    ProjectId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    LabelId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    AdditionalDataDefinitionId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    ChoiceId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    PhraseId:
      type: string
      example: "my_phrase_id"
    TaskId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    InputDataId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    SupplementaryDataId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    TaskHistoryId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    AnnotationId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
      description: |
        annotation_type が classification の場合は label_id と同じ値が格納されます。
    InspectionId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    JobId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    WebhookId:
      type: string
      example: "12345678-abcd-1234-abcd-1234abcd5678"
    Duration:
      type: string
      example: "PT34H17M36.789S"
    Project:
      type: object
      required:
        - project_id
        - organization_id
        - title
        - status
        - created_datetime
        - updated_datetime
        - configuration
        - summary
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        organization_id:
          $ref: "#/components/schemas/OrganizationId"
        title:
          type: string
        overview:
          type: string
        project_status:
          $ref: "#/components/schemas/ProjectStatus"
        input_data_type:
          $ref: "#/components/schemas/InputDataType"
        configuration:
          $ref: "#/components/schemas/ProjectConfiguration"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
        summary:
          $ref: "#/components/schemas/ProjectSummary"
    ProjectStatus:
      type: string
      enum:
        - active
        - suspended
    AssigneeRuleOfResubmittedTask:
      type: string
      enum:
        - no_assignee
        - fixed
      description: |
        * `no_assignee` - 以前の担当者で固定せず、未割当てにします。
        * `fixed` - 以前の担当者が再度担当します。以前の担当者がいない(1回目の検査/受入)場合は未割当てになります。
    InputDataType:
      type: string
      description: プロジェクトの作成時のみ指定可能（未指定の場合は image）です。更新時は無視されます
      enum:
        - image
        - movie
    ProjectConfiguration:
      type: object
      properties:
        project_rule:
          type: string
        number_of_inspections:
          description: |
            検査回数。
            * 0回：教師付け -> 受入
            * 1回：教師付け -> 検査 -> 受入
            * n回(n >= 2)：教師付け -> 検査1 -> ... -> 検査n -> 受入
          type: integer
          default: 0
          minimum: 0
        assignee_rule_of_resubmitted_task:
          description: 再提出されたタスクの検査/受入担当者ルール。
          $ref: "#/components/schemas/AssigneeRuleOfResubmittedTask"
          default: no_assignee
        max_tasks_per_member:
          description: 保留中のタスクを除き、1人（オーナー以外）に割り当てられるタスク数上限。未指定の場合は10件として扱う。
          type: integer
          default: 10
          minimum: 1
          maximum: 100
        max_tasks_per_member_including_hold:
          description: 保留中のタスクを含めて、1人（オーナー以外）に割り当てられるタスク数上限。未指定の場合は20件として扱う。
          type: integer
          default: 20
          minimum: 1
          maximum: 100
        input_data_max_long_side_length:
          description: |
            入力データ画像の長辺の最大値（未指定時は4096px）。
  
            画像をアップロードすると、長辺がこの値になるように画像が自動で圧縮されます。
            アノテーションの座標は、もとの解像度の画像でつけたものに復元されます。
  
            大きな数値を設定すると入力データ画像のサイズが大きくなり、生産性低下やブラウザで画像を表示できない懸念があります。注意して設定してください。
          type: integer
          default: 4096
          minimum: 0
        sampling_inspection_rate:
          description: 抜取検査率。0-100のパーセント値で指定し、未指定の場合は100%として扱う。
          type: integer
        sampling_acceptance_rate:
          description: 抜取受入率。0-100のパーセント値で指定し、未指定の場合は100%として扱う。
          type: integer
        private_storage_aws_iam_role_arn:
          type: string
          description: |
            AWS IAMロール。ビジネスプランでのS3プライベートストレージの認可で使います。
            [S3プライベートストレージの認可の設定についてはこちら](/docs/faq/#m0b240)をご覧ください。
          example: "arn:aws:iam::123456789012:role/AnnoFabPrivateStorageAccessor"
    ProjectSummary:
      type: object
      properties:
        last_tasks_updated_datetime:
          type: string
          format: date-time
    JobInfo:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        job_type:
          type: string
          enum:
            - copy-project
            - gen-inputs
            - gen-tasks
            - gen-annotation
            - invoke-hook
        job_id:
          $ref: "#/components/schemas/JobId"
        job_status:
          type: string
          enum:
            - progress
            - succeeded
            - failed
        job_execution:
          type: object
          description: ジョブの内部情報
        job_detail:
          type: object
          description: ジョブ結果の内部情報
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    Webhook:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        event_type:
          type: string
          enum:
            - task-completed
            - annotation-archive-updated
            - input-data-zip-registered
            - project-copy-completed
        webhook_id:
          $ref: "#/components/schemas/WebhookId"
        webhook_status:
          type: string
          enum:
            - active
            - inactive
        method:
          type: string
          enum:
            - POST
            - PUT
            - DELETE
            - PATCH
            - GET
            - HEAD
        headers:
          type: array
          items:
            $ref: "#/components/schemas/WebhookHeader"
        body:
          type: string
          example: '{\"message\": \"{{PROJECT_ID}} is updated at {{COMPLETE_DATETIME}}\"}'
        url:
          type: string
          format: uri
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    WebhookHeader:
      type: object
      properties:
        name:
          type: string
        value:
          type: string
    PutProjectRequest:
      type: object
      required:
        - title
        - status
        - organization_name
        - configuration
      properties:
        title:
          type: string
        overview:
          type: string
        status:
          type: string
        input_data_type:
          $ref: "#/components/schemas/InputDataType"
        organization_name:
          type: string
          description: |
            プロジェクトの所属組織を変更する場合は、ここに変更先の組織名を指定します。
  
            * 所属組織を変更する前にプロジェクトを停止する必要があります。
            * APIを呼び出すアカウントは、変更先組織の管理者またはオーナーである必要があります。
            * 変更後の組織に所属していないプロジェクトメンバーも残りますが、作業はできません。あらためて組織に招待してください。
        configuration:
          $ref: "#/components/schemas/ProjectConfiguration"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
        force_suspend:
          type: boolean
          description: 作業中タスクがあるプロジェクトを停止する時trueにして下さい
          default: false
    ProjectCopyRequest:
      type: object
      required:
        - dest_project_id
        - dest_title
      properties:
        dest_project_id:
          $ref: "#/components/schemas/ProjectId"
        dest_title:
          type: string
        dest_overview:
          type: string
        copy_inputs:
          type: boolean
          description: |
            「入力データ」をコピーするかどうかを指定します。
          default: false
        copy_tasks:
          type: boolean
          description: |
            「タスク」をコピーするかどうかを指定します。
  
            以下の場合、copy_tasks を true に設定するとエラーとなります。
            * copy_tasks_with_annotations が true に設定されているとき
            * copy_inputs が false に設定されているとき
        copy_annotations:
          type: boolean
          description: |
            「アノテーション」をコピーするかどうかを指定します。
  
            以下の場合、copy_annotations を true に設定するとエラーとなります。
            * copy_tasks_with_annotations が true に設定されているとき
            * copy_inputs が false に設定されているとき
            * copy_tasks が false に設定されているとき
          default: false
        copy_webhooks:
          type: boolean
          description: |
            「Webhook」をコピーするかどうかを指定します。
          default: false
        copy_tasks_with_annotations:
          deprecated: true
          type: boolean
          description: |
            「タスク」「アノテーション」をコピーするかどうかを指定します。
  
            以下の場合、copy_tasks_with_annotations を true に設定するとエラーとなります。
            * copy_inputs が false に設定されているとき
            * copy_tasks が true に設定されているとき
          default: false
        copy_supplementaly_data:
          type: boolean
          description: |
            「補助情報」をコピーするかどうかを指定します。
  
            以下の場合、copy_supplementaly_data を true に設定するとエラーとなります。
            * copy_inputs が false に設定されているとき
          default: false
        copy_instructions:
          type: boolean
          description: |
            「作業ガイド」をコピーするかどうかを指定します。
          default: false
    ProjectMember:
      type: object
      required:
        - project_id
        - account_id
        - user_id
        - username
        - member_status
        - member_role
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        user_id:
          $ref: "#/components/schemas/UserId"
        username:
          type: string
        member_status:
          $ref: "#/components/schemas/ProjectMemberStatus"
        member_role:
          $ref: "#/components/schemas/ProjectMemberRole"
        updated_datetime:
          type: string
          format: date-time
        created_datetime:
          type: string
          format: date-time
        sampling_inspection_rate:
          description: メンバー固有の抜取検査率。0-100のパーセント値で指定する。値が指定された場合、プロジェクトの抜取検査率を指定の値で上書きする。
          type: integer
    ProjectMemberStatus:
      type: string
      enum:
        - active
        - inactive
      description: |
        * `active` - プロジェクトメンバーとして有効で、プロジェクトを閲覧したり、権限があれば編集できます。
        * `inactive` - 脱退したプロジェクトメンバーを表します。プロジェクトを閲覧できません。
    ProjectMemberRole:
      type: string
      enum:
        - owner
        - worker
        - accepter
        - training_data_user
    ProjectMemberRequest:
      type: object
      properties:
        member_status:
          $ref: "#/components/schemas/ProjectMemberStatus"
        member_role:
          $ref: "#/components/schemas/ProjectMemberRole"
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    ProjectTaskStatisticsHistory:
      type: object
      properties:
        date:
          type: string
          format: date
        tasks:
          type: array
          items:
            $ref: "#/components/schemas/ProjectTaskStatistics"
    ProjectTaskStatistics:
      type: object
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        status:
          $ref: "#/components/schemas/TaskStatus"
        count:
          type: integer
          minimum: 0
        work_timespan:
          type: integer
          description: 累計実作業時間(ミリ秒)
    ProjectAccountStatistics:
      type: object
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        histories:
          type: array
          items:
            $ref: "#/components/schemas/ProjectAccountStatisticsHistory"
    ProjectAccountStatisticsHistory:
      type: object
      properties:
        date:
          type: string
          format: date
        tasks_completed:
          type: integer
        tasks_rejected:
          type: integer
        worktime:
          $ref: "#/components/schemas/Duration"
    InspectionStatistics:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        date:
          description: 集計日
          type: string
          format: date
        breakdown:
          description: 集計結果
          $ref: "#/components/schemas/InspectionStatisticsBreakdown"
    InspectionStatisticsBreakdown:
      type: object
      properties:
        labels:
          description: ラベルごとの指摘集計結果
          type: object
          additionalProperties: {
            $ref: "#/components/schemas/InspectionStatisticsPhrases"
          }
        no_label:
          description: ラベル外指摘の集計結果
          $ref: "#/components/schemas/InspectionStatisticsPhrases"
    InspectionStatisticsPhrases:
      type: object
      properties:
        phrases:
          description: 定型指摘ごとの合計数
          type: object
          additionalProperties: {
            type: integer
          }
        no_phrase:
          description: 非定型指摘の合計数
          type: integer
    TaskPhaseStatistics:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        date:
          type: string
          format: date
        phases:
          type: array
          items:
            $ref: "#/components/schemas/PhaseStatistics"
    PhaseStatistics:
      type: object
      properties:
        phase:
          type: string
        worktime:
          $ref: "#/components/schemas/Duration"
    LabelStatistics:
      type: object
      properties:
        label_id:
          $ref: "#/components/schemas/LabelId"
        completed_labels:
          type: integer
          minimum: 0
          description: ラベルごとの受入が完了したアノテーション数
        wip_labels:
          type: integer
          minimum: 0
          description: ラベルごとの受入が完了していないアノテーション数
    WorktimeStatistics:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        date:
          type: string
          format: date
        by_tasks:
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        by_inputs:
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        accounts:
          type: array
          items:
            $ref: "#/components/schemas/AccountWorktimeStatistics"
    WorktimeStatisticsItem:
      type: object
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        histogram:
          type: array
          items:
            $ref: "#/components/schemas/HistogramItem"
        average:
          $ref: "#/components/schemas/Duration"
        standard_deviation:
          $ref: "#/components/schemas/Duration"
    HistogramItem:
      type: object
      properties:
        begin:
          type: number
        end:
          type: number
        count:
          type: integer
    AccountWorktimeStatistics:
      type: object
      properties:
        account_id:
          $ref: "#/components/schemas/AccountId"
        by_tasks:
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
        by_inputs:
          type: array
          items:
            $ref: "#/components/schemas/WorktimeStatisticsItem"
    AnnotationSpecs:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        labels:
          type: array
          items:
            $ref: "#/components/schemas/Label"
        inspection_phrases:
          type: array
          items:
            $ref: "#/components/schemas/InspectionPhrase"
    AnnotationSpecsRequest:
      type: object
      properties:
        labels:
          type: array
          items:
            $ref: "#/components/schemas/Label"
          description: |
            ラベル
        inspection_phrases:
          type: array
          items:
            $ref: "#/components/schemas/InspectionPhrase"
          description: |
            定型指摘
        comment:
          type: string
    AnnotationSpecsHistory:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        updated_datetime:
          type: string
          format: date-time
        url:
          type: string
        account_id:
          $ref: "#/components/schemas/AccountId"
        comment:
          type: string
    InspectionPhrase:
      type: object
      properties:
        id:
          type: string
        text:
          $ref: "#/components/schemas/InternationalizationMessage"
    AnnotationType:
      type: string
      enum:
        - bounding_box
        - segmentation
        - segmentation_v2
        - polygon
        - polyline
        - point
        - classification
        - range
      description: |
        * `bounding_box` - 矩形を表します。
        * `segmentation` - ピクセルレベルでの塗りつぶし（ラスター）を表します。
        * `segmentation_v2` - 塗りつぶしv2を表します。v2はSemantic Segmentationに特化しています。
        * `polygon` - ポリゴン（閉じた頂点集合）を表します。
        * `polyline` - ポリライン（開いた頂点集合）を表します。
        * `point` - 点を表します。
        * `classification` - 入力データ全体に対するアノテーションを表します。
        * `range` - 動画の区間を表します。
    AdditionalDataDefinitionType:
      type: string
      enum:
        - flag
        - integer
        - comment
        - choice
        - select
        - tracking
        - link
      description: |
        * `flag` - 真偽値
        * `integer` - 整数値
        * `comment` - 自由記述
        * `choice` - 選択肢（ラジオボタン式）
        * `select` - 選択肢（ドロップダウン式）
        * `tracking` - 自由記述 (トラッキングID自動挿入)
        * `link` - アノテーションリンク
    Label:
      type: object
      properties:
        label_id:
          $ref: "#/components/schemas/LabelId"
        label_name:
          $ref: "#/components/schemas/InternationalizationMessage"
        keybind:
          type: array
          items:
            $ref: "#/components/schemas/Keybind"
        annotation_type:
          $ref: "#/components/schemas/AnnotationType"
        bounding_box_metadata:
          type: object
          properties:
            min_width:
              type: integer
            min_height:
              type: integer
            min_warn_rule:
              type: string
              default: or
            min_area:
              type: integer
              minimum: 1
              maximum: 1000000
            max_vertices:
              type: integer
            min_vertices:
              type: integer
            tolerance:
              type: integer
        segmentation_metadata:
          type: object
          properties:
            min_width:
              type: integer
            min_height:
              type: integer
            min_warn_rule:
              type: string
              default: or
            tolerance:
              type: integer
        additional_data_definitions:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalDataDefinition"
        color:
          $ref: "#/components/schemas/Color"
        annotation_editor_feature:
          $ref: "#/components/schemas/AnnotationEditorFeature"
        allow_out_of_image_bounds:
          type: boolean
          default: false
    Color:
      type: object
      properties:
        red:
          type: integer
          minimum: 0
          maximum: 255
        green:
          type: integer
          minimum: 0
          maximum: 255
        blue:
          type: integer
          minimum: 0
          maximum: 255
    AnnotationEditorFeature:
      type: object
      properties:
        append:
          type: boolean
        erase:
          type: boolean
        freehand:
          type: boolean
        rectangle_fill:
          type: boolean
        polygon_fill:
          type: boolean
        fill_near:
          type: boolean
    AdditionalDataDefinition:
      type: object
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
        read_only:
          type: boolean
          default: false
        name:
          $ref: "#/components/schemas/InternationalizationMessage"
        keybind:
          type: array
          items:
            $ref: "#/components/schemas/Keybind"
        type:
          $ref: "#/components/schemas/AdditionalDataDefinitionType"
        choices:
          type: array
          items:
            type: object
            properties:
              choice_id:
                $ref: "#/components/schemas/ChoiceId"
              name:
                $ref: "#/components/schemas/InternationalizationMessage"
              keybind:
                type: array
                items:
                  $ref: "#/components/schemas/Keybind"
        regex:
          type: string
        label_ids:
          type: array
          description: リンク属性において、リンク先として指定可能なラベルID（空の場合制限なし）
          items:
            type: string
        required:
          type: boolean
          description: リンク属性において、入力を必須とするかどうか
    Keybind:
      type: object
      properties:
        code:
          type: string
        shift:
          type: boolean
        ctrl:
          type: boolean
        alt:
          type: boolean
    Task:
      type: object
      required:
        - project_id
        - task_id
        - phase
        - status
        - work_time_span
        - updated_datetime
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          default: 1
          minimum: 1
        status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id_list:
          type: array
          items:
            $ref: "#/components/schemas/InputDataId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        histories_by_phase:
          type: array
          items:
            $ref: "#/components/schemas/TaskHistoryShort"
        work_time_span:
          type: integer
          description: 累計実作業時間(ミリ秒)
        number_of_rejections:
          type: integer
          deprecated: true
          description: |
            このタスクが差戻しされた回数（すべてのフェーズでの差戻し回数の合計
  
            このフィールドは、どのフェーズで何回差戻されたかを区別できないため、廃止予定です。
            `histories_by_phase` で各フェーズの回数を計算することで、差戻し回数が分かります。
  
            例）`acceptance`フェーズが3回ある場合、`acceptance`フェーズで2回差し戻しされたことになります。
        started_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
        sampling:
          type: string
          enum:
            - inspection_skipped
            - inspection_stages_skipped
            - acceptance_skipped
            - inspection_and_acceptance_skipped
          description: |
            * 'inspection_skipped' - このタスクが抜取検査の対象外となり、検査フェーズをスキップしたことを表す。
            * 'inspection_stages_skipped' - このタスクが抜取検査の対象外となり、検査フェーズのステージを一部スキップしたことを表す。
            * `acceptance_skipped` - このタスクが抜取検査の対象外となり、受入フェーズをスキップしたことを表す。
            * `inspection_and_acceptance_skipped` - このタスクが抜取検査の対象外となり、検査・受入フェーズをスキップしたことを表す
  
            未指定時はこのタスクが抜取検査の対象となったことを表す。(通常のワークフローを通過する)
    TaskPhase:
      type: string
      enum:
        - annotation
        - inspection
        - acceptance
      description: |
        * `annotation` - 教師付け。
        * `inspection` - 中間検査。ワークフローが3フェーズのときのみ。
        * `acceptance` - 受入。
    TaskStatus:
      type: string
      enum:
        - not_started
        - working
        - on_hold
        - break
        - complete
        - rejected
        - cancelled
      description: |
        * `not_started` - 未着手。
        * `working` - 作業中。誰かが実際にエディタ上で作業している状態。
        * `on_hold` - 保留。作業ルールの確認などで作業できない状態。
        * `break` - 休憩中。
        * `complete` - 完了。次のフェーズへ進む
        * `rejected` - 差戻し。修正のため、`annotation`フェーズへ戻る。
        * `cancelled` - 提出取消し。修正のため、前フェーズへ戻る。
    TaskRequest:
      type: object
      properties:
        input_data_id_list:
          type: array
          items:
            $ref: "#/components/schemas/InputDataId"
    TasksInputs:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        tasks:
          type: array
          items:
            $ref: "#/components/schemas/TasksInputsTask"
    TasksInputsTask:
      type: object
      properties:
        task_id:
          $ref: "#/components/schemas/TaskId"
        phase:
          $ref: "#/components/schemas/TaskPhase"
        status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id_list:
          type: array
          items:
            $ref: "#/components/schemas/InputDataId"
    TaskGenerateRequest:
      type: object
      properties:
        task_generate_rule:
          description: |
            * `TaskGenerateRuleByCount`: 1つのタスクに割りあてる入力データの個数を指定してタスクを生成します。
            * `TaskGenerateRuleByDirectory`: 入力データ名をファイルパスに見立て、ディレクトリ単位でタスクを生成します。
          oneOf:
            - $ref: "#/components/schemas/TaskGenerateRuleByCount"
            - $ref: "#/components/schemas/TaskGenerateRuleByDirectory"
            - $ref: "#/components/schemas/TaskGenerateRuleByInputDataCsv"
        project_last_updated_datetime:
          type: string
          format: date-time
          description: プロジェクトの最終更新日時。タスク生成の排他制御に使用。
    TaskGenerateRuleByCount:
      description: 1つのタスクに割りあてる入力データの個数を指定してタスクを生成します。
      type: object
      required:
        - task_id_prefix
        - allow_duplicate_input_data
        - input_data_count
        - input_data_order
      properties:
        task_id_prefix:
          type: string
          description: 生成するタスクIDのプレフィックス
        allow_duplicate_input_data:
          type: boolean
          description: falseのときは、既にタスクに使われている入力データを除外し、まだタスクに使われていない入力データだけを新しいタスクに割り当てます。trueのときは、既にタスクに使われている入力データを除外しません。
        input_data_count:
          type: integer
          description: 1つのタスクに割り当てる入力データの個数
          example: 10
        input_data_order:
          $ref: "#/components/schemas/InputDataOrder"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "ByCount"
    TaskGenerateRuleByDirectory:
      description: 入力データ名をファイルパスに見立て、ディレクトリ単位でタスクを生成します。<br>
      type: object
      required:
        - task_id_prefix
      properties:
        task_id_prefix:
          type: string
          description: 生成するタスクIDのプレフィックス
        input_data_name_prefix:
          type: string
          description: タスク生成対象の入力データ名プレフィックス
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "ByDirectory"
    TaskGenerateRuleByInputDataCsv:
      description: 各タスクへの入力データへの割当を記入したCSVへのS3上のパスを指定してタスクを生成します。
      type: object
      required:
        - csv_data_path
      properties:
        csv_data_path:
          type: string
          description: 各タスクへの入力データへの割当を記入したCSVへのS3上のパス
          example: "s3://ANNOFAB-BUCKET/PATH/TO/CSV"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "ByInputDataCsv"
    InputDataOrder:
      type: string
      enum:
        - name_asc
        - name_desc
        - random
      description: |
        タスクに割り当てる入力データの順序
  
        * `name_asc` - 入力データ名 昇順（a, b, c, ...）。日付や番号などの連続するデータ名を扱う場合に推奨
        * `name_asc` - 入力データ名 降順（z, y, x, ...）
        * `random` - ランダム
    TaskOperation:
      type: object
      properties:
        status:
          allOf:
            - $ref: "#/components/schemas/TaskStatus"
            - description: 次に遷移させるタスクの状態
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
        account_id:
          allOf:
            - $ref: "#/components/schemas/AccountId"
            - description: 変更後の担当者のアカウントID
    TaskStart:
      type: object
      properties:
        phase:
          allOf:
            - $ref: "#/components/schemas/TaskPhase"
            - description: 開始するタスクのフェーズ
    TaskHistoryShort:
      description: タスクのあるフェーズを誰が担当したかを表します。
      type: object
      required:
        - phase
      properties:
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          default: 1
          minimum: 1
        account_id:
          $ref: "#/components/schemas/AccountId"
    TaskHistory:
      description: タスクのあるフェーズで、誰がいつどれくらいの作業時間を費やしたかを表すタスク履歴です。
      type: object
      required:
        - project_id
        - task_id
        - task_history_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_history_id:
          $ref: "#/components/schemas/TaskHistoryId"
        started_datetime:
          type: string
          format: date-time
        ended_datetime:
          type: string
          format: date-time
        accumulated_labor_time_milliseconds:
          type: string
          description: 累計実作業時間（ISO 8601 duration）
          example: "PT34H17M36.789S"
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          minimum: 1
        account_id:
          $ref: "#/components/schemas/AccountId"
    TaskHistoryEvent:
      description: タスク履歴イベントは、タスクの状態が変化した１時点を表します。作業時間は、複数のこれらイベントを集約して計算するものなので、このオブジェクトには含まれません。
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_history_id:
          $ref: "#/components/schemas/TaskHistoryId"
        created_datetime:
          type: string
          format: date-time
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          default: 1
          minimum: 1
        status:
          $ref: "#/components/schemas/TaskStatus"
        account_id:
          $ref: "#/components/schemas/AccountId"
    TaskValidation:
      description: タスクの全入力データに対するバリデーション結果です。
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        inputs:
          type: array
          items:
            $ref: "#/components/schemas/InputDataSummary"
    InputDataSummary:
      description: ある入力データのバリデーション結果です。入力データIDをキーに引けるようにMap[入力データID, バリデーション結果]となっています
      type: object
      properties:
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        inspection_summary:
          type: string
          enum:
            - no_inspection
            - no_comment_inspection
            - new_reply_to_unprocessed
            - new_unprocessed_inspection
            - unprocessed
            - complete
        annotation_summaries:
          type: array
          items:
            $ref: "#/components/schemas/ValidationError"
    InputData:
      type: object
      required:
        - input_data_id
        - project_id
        - input_data_name
        - input_data_path
        - updated_datetime
      properties:
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        project_id:
          $ref: "#/components/schemas/ProjectId"
        input_data_name:
          type: string
          description: 表示用の名前です。
        input_data_path:
          type: string
          example: "s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA"
          description: |
            入力データの実体が保存されたパスです。
            s3スキーマまたはhttpsスキーマのみサポートしています。
        url:
          type: string
          description: |
            入力データを取得するためのhttpsスキーマのURLです。
  
            このURLはセキュリティのために認証認可が必要となっており、URLだけでは入力データを参照できません。
            このURLは内部用であり、常に変更になる可能性があります。そのため、アクセスは保証外となります。
            また、このURLのレスポンスは最低1時間キャッシュされます。
            キャッシュを無効にしたい場合は、クエリパラメータにアクセス毎にランダムなUUIDなどを付与してください。
  
            設定の不備等でデータが取得できない場合、この属性は設定されません。
        etag:
          type: string
        original_input_data_path:
          type: string
          example: "s3://YOUR-BUCKET/PATH/TO/INPUT_DATA"
          description: |
            AF外部のストレージから登録された場合、その外部ストレージ中のパス。
            それ以外の場合は値なし
        original_resolution:
          $ref: "#/components/schemas/Resolution"
        resized_resolution:
          $ref: "#/components/schemas/Resolution"
        updated_datetime:
          type: string
          format: date-time
        sign_required:
          type: boolean
          description: |
            データがSigned Cookieによるクロスオリジン配信に対応しているか否かです。
    InputDataRequest:
      type: object
      required:
        - input_data_name
        - input_data_path
      properties:
        input_data_name:
          type: string
          description: 表示用の名前
        input_data_path:
          type: string
          example: "s3://YOUR-BUCKET/PATH/TO/OBJECT"
          description: |
            AnnoFabに登録する入力データの実体が保存されたパスです。
  
            対応スキーマ：
            * s3
            * https
            * data（廃止予定）
  
            場面別の使い分け：
            * [一時データ保存先取得API](#operation/createTempPath)を使ってAFにアップロードした場合: `s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA`
            * [プライベートストレージ](/docs/faq/#prst9c)の場合
                * `https://YOUR-DOMAIN/PATH/TO/INPUT_DATA`
                * `s3://YOUR-BUCKET-FOR-PRIVATE-STORAGE/PATH/TO/INPUT_DATA`
                    * S3プライベートストレージのパスを登録する場合、[事前に認可の設定が必要](/docs/faq/#m0b240)です。
            * dataスキーマでアップロードする場合: `data://....`
                * dataスキーマは、4MB以内の画像であれば[一時データ保存先取得API](#operation/createTempPath)を使わずに直接アップロードできるので便利です。
        last_updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
        sign_required:
          type: boolean
          description: |
            データがSigned Cookieによるクロスオリジン配信に対応しているか否かです。<br>
            このオプションを有効にする場合は、`input_data_path`として、AnnoFabのAWS IDをTrusted Signerとして登録したCloudFrontのURLを指定してください。
    SupplementaryData:
      type: object
      required:
        - project_id
        - input_data_id
        - supplementary_data_id
        - supplementary_data_name
        - supplementary_data_path
        - supplementary_data_type
        - supplementary_data_number
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        supplementary_data_id:
          $ref: "#/components/schemas/SupplementaryDataId"
        supplementary_data_name:
          type: string
          description: 表示用の名前
        supplementary_data_path:
          type: string
          example: "s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA"
          description: |
            補助情報の実体が保存されたパスです。
            s3スキーマまたはhttpsスキーマのみサポートしています。
        url:
          type: string
          format: uri
          deprecated: true
          description: このフィールドはAF内部での利用のみを想定しており、依存しないでください。
        etag:
          type: string
        supplementary_data_type:
          type: string
          enum:
            - image
            - text
        supplementary_data_number:
          type: integer
          description: 表示順を表す数値（昇順）。同じ入力データに対して複数の補助情報で表示順が重複する場合、順序不定になります。
        updated_datetime:
          type: string
          format: date-time
    SupplementaryDataRequest:
      type: object
      required:
        - supplementary_data_name
        - supplementary_data_path
        - supplementary_data_type
        - supplementary_data_number
      properties:
        supplementary_data_name:
          type: string
          description: 表示用の名前
        supplementary_data_path:
          type: string
          example: "s3://YOUR-BUCKET/PATH/TO/OBJECT"
          description: |
            AnnoFabに登録する補助情報の実体が保存されたパスです。
  
            対応スキーマ：s3, https
  
            * [一時データ保存先取得API](#operation/createTempPath)を使ってAFにアップロードしたファイルパスの場合
                * `s3://ANNOFAB-BUCKET/PATH/TO/INPUT_DATA`
                * 補助情報作成/更新API成功時、アップロードしたファイルが一時データ保存先からコピーされます。
                    * APIのレスポンスからアップロードしたファイルのコピー先パス（s3スキーマ）を取得できます。
            * すでにAFに登録されている補助情報のパスの場合
                * `s3://ANNOFAB-SUPPLEMENTARY-BUCKET/PATH/TO/INPUT_DATA`
                * ファイルはコピーされません。
            * [プライベートストレージ](/docs/faq/#prst9c)のパスの場合
                * `https://YOUR-DOMAIN/PATH/TO/INPUT_DATA`
                * `s3://YOUR-BUCKET-FOR-PRIVATE-STORAGE/PATH/TO/INPUT_DATA`
                    * S3プライベートストレージのパスを登録する場合、[事前に認可の設定が必要](/docs/faq/#m0b240)です。
                * AFにファイルはコピーされません。
        supplementary_data_type:
          type: string
          enum:
            - image
            - text
        supplementary_data_number:
          type: integer
          description: 表示順を表す数値（昇順）。同じ入力データに対して複数の補助情報で表示順が重複する場合、順序不定になります。
        last_updated_datetime:
          type: string
          format: date-time
    WebhookTestRequest:
      type: object
      properties:
        placeholders:
          description: プレースホルダ名と置換する値
          type: object
          example:
            SOME_PLACEHOLDER: value
            SOME_NAME: value2
    WebhookTestResponse:
      type: object
      properties:
        result:
          description: |
            * success: 通知先から正常なレスポンス（2xx系）を受け取った
            * failure: 通知先からエラーレスポンス（2xx系以外）を受け取った
            * error: リクエスト送信に失敗した、もしくはレスポンスを受信できなかった
          type: string
          enum: [success, failure, error]
          example: success
        request_body:
          description: 実際に送信されたリクエストボディ
          type: string
        response_status:
          description: 通知先から返されたHTTPステータスコード
          type: integer
          example: 200
        response_body:
          description: 通知先から返されたレスポンスボディ
          type: string
        message:
          description: result="error" 時のエラー内容等
          type: string
    BatchInputDataRequestItemDelete:
      type: object
      description: 入力データ削除
      required:
        - project_id
        - input_data_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    BatchTaskRequestItemDelete:
      type: object
      description: タスク削除
      required:
        - project_id
        - task_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    DataPath:
      type: object
      properties:
        url:
          type: string
          format: uri
          example: "https://s3.<REGION>.amazonaws.com/<ANNOFAB-TEMP-BUCKET>/<UUID>/<UUID>?param1=...&param2=..."
          description: ファイルアップロード用の一時URLです。このURLにファイルをアップロードします。
        path:
          type: string
          example: s3://<ANNOFAB-TEMPORARY-BUCKET-NAME>/<UUID>/<UUID>
          description: アップロードしたファイルをAFの [入力データ](#tag/af-input) や [補助情報](#tag/af-supplementary) に登録するとき、この`path`を指定します。
    AnnotationQuery:
      type: object
      properties:
        task_id:
          $ref: "#/components/schemas/TaskId"
        exact_match_task_id:
          description: |
            タスクIDの検索方法を指定します。
            trueの場合は完全一致検索、falseの場合は中間一致検索です。
          type: boolean
          default: true
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        exact_match_input_data_id:
          description: |
            入力データIDの検索方法を指定します。
            trueの場合は完全一致検索、falseの場合は中間一致検索です。
          type: boolean
          default: true
        label_id:
          $ref: "#/components/schemas/LabelId"
        attributes:
          type: array
          items:
            $ref: "#/components/schemas/AdditionalData"
    Annotation:
      type: object
      required:
        - project_id
        - task_id
        - input_data_id
        - details
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        details:
          type: array
          items:
            $ref: "#/components/schemas/AnnotationDetail"
        comment:
          type: string
        updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    AnnotationDataHoldingType:
      type: string
      enum:
        - inner
        - outer
      description:  |
        * `inner` - アノテーションのデータ部をJSON内部に保持します。
        * `outer` - アノテーションのデータ部を外部ファイルの形式（画像など）で保持します
    AnnotationDetail:
      type: object
      required:
        - annotation_id
        - account_id
        - label_id
        - is_protected
        - data_holding_type
        - additional_data_list
        - comment
      properties:
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        is_protected:
          type: boolean
          default: false
        data_holding_type:
          $ref: "#/components/schemas/AnnotationDataHoldingType"
        data:
          oneOf:
            - type: string
            - $ref: "#/components/schemas/FullAnnotationData"
          description: |
            data_holding_type が inner の場合のみ存在し、annotation_type に応じたデータの値が格納されます。
            `string`もしくは`object`の値を指定することができ、`string`の形式は次の通りです。
              * annotation_type が bounding_box の場合: 左上x,左上y,右下x,右下y のCSV文字列形式。
              * annotation_type が polygon/polyline の場合: x1,y1,x2,y2, ... のCSV文字列形式。
              * annotation_type が segmentation または segmentation_v2 の場合: 塗っていないところは rgba(0,0,0,0)、塗ったところは rgba(255,255,255,1) の PNGデータをBase64エンコードしたもの。
              * annotation_type が classification の場合: data 属性は存在しない。
              * annotation_type が range の場合: 開始時間,終了時間 のCSV文字列形式。
        path:
          type: string
          description: data_holding_typeがouterの場合のみ存在し、データのパスが格納される (現在はアノテーションIDと等しい)
        etag:
          type: string
          description: data_holding_typeがouterの場合のみ存在し、データのETagが格納される
        url:
          type: string
          format: uri
          description: data_holding_typeがouterの場合のみ存在し、データへの一時URLが格納される
        additional_data_list:
          type: array
          description: |
            各要素は、 [アノテーション仕様](#operation/getAnnotationSpecs)で定義された属性（`additional_data_definitions`内）のいずれかの要素と対応づけます。
            各要素は、どの属性なのかを表す`additional_data_definition_id`、値が必要です。値は、属性の種類に対応するキーに格納します（下表）。
  
            <table>
            <tr><th>アノテーション属性の種類<br>（`additional_data_definition`の`type`）</th><th>属性の値を格納するキー</th><th>データ型</th></tr>
            <tr><td>`comment` または `tracking`</td><td>`comment`</td><td>string</td></tr>
            <tr><td>`flag`</td><td>`flag`</td><td>boolean</td></tr>
            <tr><td>`integer`</td><td>`integer`</td><td>integer</td></tr>
            <tr><td>`choice` または `select`</td><td>`choice`</td><td>string（選択肢ID）</td></tr>
            <tr><td>`link`</td><td>`comment`</td><td>string（アノテーションID）</td></tr>
            </table>
          items:
            $ref: "#/components/schemas/AdditionalData"
        comment:
          type: string
    AdditionalData:
      type: object
      required:
        - additional_data_definition_id
      properties:
        additional_data_definition_id:
          $ref: "#/components/schemas/AdditionalDataDefinitionId"
        flag:
          type: boolean
        interger:
          type: integer
        comment:
          type: string
        choice:
          $ref: "#/components/schemas/ChoiceId"
    SingleAnnotation:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        detail:
          $ref: "#/components/schemas/SingleAnnotationDetail"
        updated_datetime:
          type: string
          format: date-time
    SimpleAnnotation:
      type: object
      properties:
        annotation_format_version:
          type: string
          example: "1.0.0"
          description: |
            アノテーションフォーマットのバージョンです。
            アノテーションフォーマットとは、プロジェクト個別のアノテーション仕様ではなく、AnnoFabのアノテーション構造のことです。
            したがって、アノテーション仕様を更新しても、このバージョンは変化しません。
  
            バージョンの読み方と更新ルールは、業界慣習の[Semantic Versioning](https://semver.org/)にもとづきます。
  
            JSONに出力されるアノテーションフォーマットのバージョンは、アノテーションZIPが作成される時点のものが使われます。
            すなわち、`1.0.0`の時点のタスクで作成したアノテーションであっても、フォーマットが `1.0.1` に上がった次のZIP作成時では `1.0.1` となります。
            バージョンを固定してZIPを残しておきたい場合は、プロジェクトが完了した時点でZIPをダウンロードして保管しておくか、またはプロジェクトを「停止中」にします。
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_phase:
          $ref: "#/components/schemas/TaskPhase"
        task_phase_stage:
          type: integer
          default: 1
          minimum: 1
        task_status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        input_data_name:
          type: string
        details:
          type: array
          items:
            $ref: "#/components/schemas/SimpleAnnotationDetail"
    BatchAnnotation:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        additional_data_list:
          type: array
          items:
            $ref: "#/components/schemas/FullAnnotationAdditionalData"
        updated_datetime:
          type: string
          format: date-time
    BatchAnnotationRequestItemPut:
      type: object
      description: アノテーション更新
      required:
        - data
      properties:
        data:
          $ref: "#/components/schemas/BatchAnnotation"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Put"
    BatchAnnotationRequestItemDelete:
      type: object
      description: アノテーション削除
      required:
        - project_id
        - task_id
        - input_data_id
        - annotation_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        updated_datetime:
          type: string
          format: date-time
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    SingleAnnotationDetail:
      type: object
      properties:
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        account_id:
          $ref: "#/components/schemas/AccountId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        data_holding_type:
          $ref: "#/components/schemas/AnnotationDataHoldingType"
        data:
          $ref: "#/components/schemas/FullAnnotationData"
        etag:
          type: string
          description: data_holding_typeがouterの場合のみ存在し、データのETagが格納される
        url:
          type: string
          format: uri
          description: data_holding_typeがouterの場合のみ存在し、データへの一時URLが格納される
        additional_data_list:
          type: array
          items:
            $ref: "#/components/schemas/FullAnnotationAdditionalData"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          type: string
          format: date-time
    SimpleAnnotationDetail:
      type: object
      properties:
        label:
          type: string
          example: "pedestrian"
          description: |
            アノテーション仕様のラベル名です。
        annotation_id:
          type: string
          example: "acb5359e-be2e-402b-b59a-b5fdbb378ad9"
          description: |
            個々のアノテーションにつけられたIDです。
        data:
          $ref: "#/components/schemas/FullAnnotationData"
        attributes:
          type: object
          description: |
            キーに属性の名前、値に各属性の値が入った辞書構造です。
          example:
            maker: "AAA Motors"
            size: 12345
            is_foo_bar_buz: true
    FullAnnotation:
      type: object
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        task_phase:
          $ref: "#/components/schemas/TaskPhase"
        task_phase_stage:
          type: integer
          default: 1
          minimum: 1
        task_status:
          $ref: "#/components/schemas/TaskStatus"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        input_data_name:
          type: string
        detail:
          type: array
          items:
            $ref: "#/components/schemas/FullAnnotationDetail"
        updated_datetime:
          type: string
          format: date-time
    FullAnnotationDetail:
      type: object
      properties:
        annotation_id:
          $ref: "#/components/schemas/AnnotationId"
        user_id:
          $ref: "#/components/schemas/UserId"
        label_id:
          $ref: "#/components/schemas/LabelId"
        label_name:
          $ref: "#/components/schemas/InternationalizationMessage"
        annotation_type:
          $ref: "#/components/schemas/AnnotationType"
        data_holding_type:
          $ref: "#/components/schemas/AnnotationDataHoldingType"
        data:
          $ref: "#/components/schemas/FullAnnotationData"
        additional_data_list:
          type: array
          items:
            $ref: "#/components/schemas/FullAnnotationAdditionalData"
    FullAnnotationData:
      oneOf:
        - type: object
        - $ref: "#/components/schemas/FullAnnotationDataClassification"
        - $ref: "#/components/schemas/FullAnnotationDataSegmentation"
        - $ref: "#/components/schemas/FullAnnotationDataSegmentationV2"
        - $ref: "#/components/schemas/FullAnnotationDataBoundingBox"
        - $ref: "#/components/schemas/FullAnnotationDataPoints"
        - $ref: "#/components/schemas/FullAnnotationDataSinglePoint"
        - $ref: "#/components/schemas/FullAnnotationDataRange"
        - $ref: "#/components/schemas/FullAnnotationDataUnknown"
    FullAnnotationAdditionalData:
      type: object
      properties:
        additional_data_definition_id:
          allOf:
            - $ref: "#/components/schemas/AdditionalDataDefinitionId"
            - description: 属性ID
        additional_data_definition_name:
          allOf:
            - $ref: "#/components/schemas/InternationalizationMessage"
            - description: 属性表示名
        type:
          $ref: "#/components/schemas/AdditionalDataDefinitionType"
        flag:
          type: boolean
          description: typeがflagの場合に、フラグのON(true)またはOFF(false)が格納される
        integer:
          type: integer
          description: typeがintegerの場合に、整数値が格納される
        comment:
          type: string
          description: |
            * typeがcommentの場合、コメントの値
            * typeがtrackingの場合、トラッキングID
            * typeがlinkの場合、リンク先のアノテーションID
        choice:
          allOf:
            - $ref: "#/components/schemas/ChoiceId"
            - description: typeがchoice・selectの場合に、選択肢のIDが格納される
        choice_name:
          allOf:
            - $ref: "#/components/schemas/InternationalizationMessage"
            - description: typeがchoice・selectの場合に、選択肢の表示名が格納される
    FullAnnotationDataClassification:
      type: object
      required:
        - _type
      properties:
        _type:
          type: string
          description: Classification
          example: "Classification"
    FullAnnotationDataSegmentation:
      description: 塗っていないところは rgba(0,0,0,0)、塗ったところは rgba(255,255,255,1) の PNGデータをBase64エンコードしたもの。
      type: object
      required:
        - data_uri
        - _type
      properties:
        data_uri:
          type: string
        _type:
          type: string
          description: Segmentation
          example: "Segmentation"
    FullAnnotationDataSegmentationV2:
      type: object
      required:
        - data_uri
        - _type
      properties:
        data_uri:
          type: string
        _type:
          type: string
          description: SegmentationV2
          example: "SegmentationV2"
    FullAnnotationDataBoundingBox:
      description: annotation_type が bounding_boxの場合に、[左上頂点座標, 右下頂点座標]を {"x":int, "y":int} の形式で記述したもの。
      type: object
      required:
        - left_top
        - right_bottom
        - _type
      properties:
        left_top:
          $ref: "#/components/schemas/Point"
        right_bottom:
          $ref: "#/components/schemas/Point"
        _type:
          type: string
          description: BoundingBox
          example: "BoundingBox"
    FullAnnotationDataPoints:
      description: |
        頂点座標 {"x":int, "y":int} の配列。
  
        * annotation_type が polygon/polyline の場合: ポリゴン/ポリラインを構成する頂点の配列。
      type: object
      required:
        - points
        - _type
      properties:
        points:
          type: array
          items:
            $ref: "#/components/schemas/Point"
        _type:
          type: string
          description: Points
          example: "Points"
    FullAnnotationDataSinglePoint:
      description: annotation_type が pointの場合。
      type: object
      required:
        - point
        - _type
      properties:
        point:
          $ref: "#/components/schemas/Point"
        _type:
          type: string
          description: SinglePoint。
          example: "SinglePoint"
    FullAnnotationDataRange:
      description: annotation_type が rangeの場合に、[開始時間, 終了時間]を {"begin":number, "end":number} の形式で記述したもの。開始時間・終了時間の単位は秒で、精度はミリ秒まで。
      type: object
      required:
        - begin
        - end
        - _type
      properties:
        begin:
          type: number
          description: 開始時間（ミリ秒）。小数点以下はミリ秒以下を表します。
        end:
          type: number
          description: 終了時間（ミリ秒）。小数点以下はミリ秒以下を表します。
        _type:
          type: string
          description: Range
          example: "Range"
    FullAnnotationDataUnknown:
      description: annotation_typeにデータ構造が一致していない場合に、元のdata文字列をそのまま記述したもの。
      type: object
      required:
        - data
        - _type
      properties:
        data:
          type: string
        _type:
          type: string
          description: Unknown
          example: "Unknown"
    Point:
      description: 座標
      type: object
      required:
        - x
        - y
      properties:
        x:
          type: integer
        y:
          type: integer
    BatchInspectionRequestItemPut:
      type: object
      description: 検査コメント更新
      required:
        - data
      properties:
        data:
          $ref: "#/components/schemas/Inspection"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Put"
    BatchInspectionRequestItemDelete:
      type: object
      description: 検査コメント削除
      required:
        - project_id
        - task_id
        - input_data_id
        - inspection_id
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        inspection_id:
          $ref: "#/components/schemas/InspectionId"
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Delete"
    Inspection:
      type: object
      description: 検査コメント
      required:
        - project_id
        - task_id
        - input_data_id
        - inspection_id
        - phase
        - commenter_account_id
        - data
        - status
        - created_datetime
      properties:
        project_id:
          $ref: "#/components/schemas/ProjectId"
        task_id:
          $ref: "#/components/schemas/TaskId"
        input_data_id:
          $ref: "#/components/schemas/InputDataId"
        inspection_id:
          $ref: "#/components/schemas/InspectionId"
        phase:
          $ref: "#/components/schemas/TaskPhase"
        phase_stage:
          type: integer
          default: 1
          minimum: 1
        commenter_account_id:
          $ref: "#/components/schemas/AccountId"
        annotation_id:
          allOf:
            - $ref: "#/components/schemas/AnnotationId"
            - description: |
                特定のアノテーションに対するコメントの場合はそのアノテーションのID、座標に対する場合は値なし
        data:
          oneOf:
            - $ref: "#/components/schemas/InspectionDataPoint"
            - $ref: "#/components/schemas/InspectionDataPolyline"
            - $ref: "#/components/schemas/InspectionDataTime"
        parent_inspection_id:
          $ref: "#/components/schemas/InspectionId"
        phrases:
          type: array
          description: 選択された定型指摘ID. 未選択時は空
          items:
            $ref: "#/components/schemas/PhraseId"
        comment:
          type: string
        status:
          $ref: "#/components/schemas/InspectionStatus"
        created_datetime:
          type: string
          format: date-time
        updated_datetime:
          $ref: "#/components/schemas/LastUpdatedDatetime"
    InspectionDataPoint:
      type: object
      description: |
        問題のある部分を示す座標
      required:
        - x
        - y
      properties:
        x:
          type: integer
        y:
          type: integer
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Point"
    InspectionDataPolyline:
      type: object
      description: |
        問題のある部分を示すポリライン
      required:
        - coordinates
      properties:
        coordinates:
          type: array
          description: |
            ポリラインを構成する頂点の配列
          items:
            type: object
            properties:
              x:
                type: integer
              y:
                type: integer
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Polyline"
    InspectionDataTime:
      type: object
      description: |
        問題のある時間帯を表す区間
      required:
        - start
        - end
      properties:
        start:
          type: number
        end:
          type: number
        _type:
          type: string
          description: |
            [詳しくはこちら](#section/API-Convention/API-_type)
          example: "Time"
    Resolution:
      type: object
      description: |
        画像などの解像度
      required:
        - width
        - height
      properties:
        width:
          type: number
        height:
          type: number
    InspectionStatus:
      type: string
      enum:
        - annotator_action_required
        - no_correction_required
        - error_corrected
        - no_comment_inspection
      description: |
        * `annotator_action_required` - 未処置。`annotation`フェーズ担当者が何らかの回答をする必要あり
        * `no_correction_required` - 処置不要。`annotation`フェーズ担当者が、検査コメントによる修正は不要、と回答した
        * `error_corrected` - 修正済み。`annotation`フェーズ担当者が、検査コメントの指示どおり修正した
        * `no_comment_inspection` - 作成途中。検査コメントの中身が未入力
    AggregationResult:
      oneOf:
        - type: object
        - $ref: "#/components/schemas/CountResult"
    CountResult:
      type: object
      properties:
        _type:
          type: string
          example: "CountResult"
          description: |
            他と区別するために `CountResult` を指定します
        name:
          type: string
        field:
          type: string
        items:
          type: array
          items:
            $ref: "#/components/schemas/Count"
    Count:
      type: object
      properties:
        key:
          type: string
        count:
          type: integer
        aggregations:
          type: array
          items:
            $ref: "#/components/schemas/AggregationResult"
    InstructionHistory:
      type: object
      properties:
        history_id:
          type: string
        account_id:
          type: string
        updated_datetime:
          type: string
          format: date-time
    InstructionImage:
      type: object
      properties:
        image_id:
          type: string
        path:
          type: string
        url:
          type: string
          format: uri
        etag:
          type: string
    ValidationError:
      oneOf:
        - type: object
        - $ref: "#/components/schemas/InvalidAnnotationData"
        - $ref: "#/components/schemas/DuplicatedSegmentationV2"
        - $ref: "#/components/schemas/InvalidCommentFormat"
        - $ref: "#/components/schemas/UnknownLinkTarget"
        - $ref: "#/components/schemas/InvalidLinkTarget"
        - $ref: "#/components/schemas/EmptyAttribute"
        - $ref: "#/components/schemas/Duplicated"
        - $ref: "#/components/schemas/UnknownAdditionalData"
        - $ref: "#/components/schemas/OutOfImageBounds"
        - $ref: "#/components/schemas/UnknownLabel"
    InvalidAnnotationData:
      type: object
      description: アノテーションデータ不正エラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        message:
          type: string
        _type:
          type: string
          description: InvalidAnnotationData
          example: "InvalidAnnotationData"
    DuplicatedSegmentationV2:
      type: object
      description: 塗りつぶしv2のラベルに対する1ラベルにつき1アノテーションまでの制約違反エラー
      properties:
        labelId:
          type: string
        annotationIds:
          type: array
          items:
            type: string
        _type:
          type: string
          description: DuplicatedSegmentationV2
          example: "DuplicatedSegmentationV2"
    InvalidCommentFormat:
      type: object
      description: コメントが正規表現に合致しないエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        additionalDataDefinitionId:
          type: string
        _type:
          type: string
          description: InvalidCommentFormat
          example: "InvalidCommentFormat"
    UnknownLinkTarget:
      type: object
      description: 指定されたIDに該当するアノテーションが存在しないエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        additionalDataDefinitionId:
          type: string
        _type:
          type: string
          description: UnknownLinkTarget
          example: "UnknownLinkTarget"
    InvalidLinkTarget:
      type: object
      description: リンク先アノテーションが許可されているラベルでないエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        additionalDataDefinitionId:
          type: string
        _type:
          type: string
          description: InvalidLinkTarget
          example: "InvalidLinkTarget"
    EmptyAttribute:
      type: object
      description: 属性が未入力であるエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        additionalDataDefinitionId:
          type: string
        _type:
          type: string
          description: EmptyAttribute
          example: "EmptyAttribute"
    Duplicated:
      type: object
      description: 値の重複が許可されていない属性の重複エラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        additionalData:
          $ref: "#/components/schemas/AdditionalData"
        _type:
          type: string
          description: Duplicated
          example: "Duplicated"
    UnknownAdditionalData:
      type: object
      description: 何らかの原因で、アノテーション仕様にない属性がついているエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        additionalDataDefinitionId:
          type: string
        _type:
          type: string
          description: UnknownAdditionalData
          example: "UnknownAdditionalData"
    OutOfImageBounds:
      type: object
      description: 画像範囲外にアノテーションがはみ出しているエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        _type:
          type: string
          description: OutOfImageBounds
          example: "OutOfImageBounds"
    UnknownLabel:
      type: object
      description: 何らかの原因で、アノテーション仕様にないラベルがついているエラー
      properties:
        labelId:
          type: string
        annotationId:
          type: string
        _type:
          type: string
          description: UnknownLabel
          example: "UnknownLabel"
